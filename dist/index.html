<html><head><style>body{display:flex;flex-direction:column;align-items:center}#svg{left:0;position:absolute;z-index:-1}#d{margin-left:4px;position:absolute;bottom:0;width:92.5%;height:200px;background-color:rgb(128,0,0,95%);border:4px solid #f8f8ff;border-radius:16px;color:#fff;padding:16px;font-family:sans-serif}#s{position:absolute;top:8px;left:100px}#o{position:absolute;top:8px;right:100px}canvas{position:absolute;top:0}.cc{position:relative;width:600px;height:800px;border:1px solid #000}</style></head><body><div><div class="cc"><canvas id="sc"width="600"height="800"></canvas><canvas id="hc"width="600"height="800"></canvas><canvas id="dc"width="600"height="800"></canvas><div id="d"></div><div id="o"></div><div id="s"></div></div><svg id="svg"width="2066"height="900"version="1.1"xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient6087-1"cx="285"cy="93.5"r="78.4"gradientTransform="matrix(.232 0 0 .214 601 327)"gradientUnits="userSpaceOnUse"><stop stop-color="#fff"offset="0"/><stop stop-color="#fff"offset=".495"/><stop stop-color="#bababa"offset=".624"/><stop offset=".751"/><stop stop-color="#fff"offset="1"/></radialGradient><radialGradient id="radialGradient6065-2"cx="118"cy="104"r="78.4"gradientTransform="matrix(-.25 0 0 -.254 699 377)"gradientUnits="userSpaceOnUse"><stop stop-color="#fff"stop-opacity="0"offset="0"/><stop stop-color="#6c6c6c"stop-opacity="0"offset=".619"/><stop stop-color="#43434f"offset=".699"/><stop stop-color="#fff"stop-opacity="0"offset=".82"/><stop stop-color="#5d5d5d"offset="1"/></radialGradient><pattern id="pattern2065"patternTransform="matrix(1 0 0 1.16 1092 167)"xlink:href="#pattern1097"/><pattern id="pattern1097"width="21.6"height="137.4"patternTransform="translate(1286 292)"patternUnits="userSpaceOnUse"><g transform="matrix(2.62 0 0 3.79 -2.76 -4.55)"stroke="#28170b"stroke-width=".5"><path d="M1.32 3.44v18.8c1.28.91 2.57 1.42 3.97 1.36 1.26-.1 1.98-.52 3.48-1.52l.261-18.5z"fill="#520"stroke-linejoin="round"/><ellipse cx="5.14"cy="3.55"rx="3.84"ry="2.1"fill="#e9c6af"/><path d="M6.13 12.9v24.3H4.26V12.9c.08-.1.811-.35.941-.36.129 0 .711.16.93.36z"fill="#520"stroke-linejoin="round"/></g></pattern></defs><g id="$layer1"><path id="$bend"d="M735 179c-2.2-2.2-3.9-2.9-4-7.2l.5-156c.1-7.26 11.3-6.82 11.3.1l-.8 151c0 1.2-.3 3.3 1.2 4.2l142 81.7c3.3 2.5 2.8 6.3 1.2 8.4s-5.1 2.9-7 1.5z"fill="#999"stroke="#000"stroke-width="2"/><g id="$kicker"><g stroke="#000"><path d="M601 102V87.5c12.5 2.28 11.4 17.1 9.6 19-4.1 2.3-10 1.1-9.6-4.5zM686 142v-14.4c-14.1 3.2-11.2 1.2-11.5 15.2 2.3 7.6 11.3 5.1 11.5-.8z"fill="#fc0"/><path d="M675 142c8.1 1.8 11.7-4.3 10.8-13.3-89.2-66.6-84-35.5-84-35.5s2.1 5.9 4.8 8.1c10.2 6.7 48.6 28.5 68.4 40.7z"fill="#a80"/><path id="$kicker.fx"d="M674 136c3.1 1.9 6.4.8 9.4-2.5s2.7-7.4.8-10.6l-66.1-109c-1.8-3.73-5.6-6.51-10.1-5.8-4 .7-7.4 4.7-7.1 8.8l.2 70.7c.4 3.8 2.1 5.7 4.8 7.9 10.2 6.5 48.2 28.6 68.1 40.4z"fill="#fc0"/><path d="M674 133c1.3.8 4.6 1.3 6.6-.5 1.9-1.8 2.6-3 2.4-4.9-.3-1.8-1-2.7-1.7-3.9 0 0-64.2-106-64.7-107s-1.2-2.39-3.1-3.94c-1.7-1.27-3.5-1.92-5.4-1.32-2.1.65-3.8 3.14-3.5 6.88v67.3c.4 3.47 1.7 5.73 4.2 7.74 9.3 5.92 47.1 28.3 65.2 39.2z"fill="maroon"/></g><path id="$helmet.fx"d="M636 58.8l-1.6 9.2c.7.3 3 1.4 3.7 4l4 1.7-.7 9.4.7 5.1-7.9 12.5V84c1.5-.89 5.2-2.44 5.1-3.9-.1-1.4-6.1-1.9-6.1.2-.1.7.2 7.4-1.1 7.6-1.2-.23-1.3-5.28-1.3-7.42 0-1.89-5.8-2.15-6.1-.38-.2 1.63 3.2 2.98 5 3.9l.1 16.8-8-12.7.9-4.9-.8-9.5 4-1.6c.4-1.5 1.7-3.4 3.6-4l-1.5-9.3c2.9-.49 5.2-.46 8 0z"fill="#fc0"opacity=".709"/></g><g id="$flipper"stroke="#000"><path d="M924 34.4c.6 4.3 3.3 7.9 7 9.6l47.8 28.1c1.3.8 2.7 1.2 4.1 1.2 4.1 0 7.5-3.5 7.5-7.8 0-.7-.1-1.5-.3-2.2-17-10.7-45.8-22.8-66.1-28.9z"fill="#530000"/><path d="M935 18.8c-6.4 0-11.7 5.6-11.7 12.3 0 4.9 2.8 9.4 7.1 11.3l47.9 28.1c1.2.8 2.6 1.3 4 1.3 4.1 0 7.5-3.5 7.5-7.8 0-2.4-1-4.6-2.7-6.1-14.8-12-29.6-24.1-44.4-36.1-2.1-1.72-5.2-2.94-7.7-3z"fill="maroon"/><path d="M929 25c-2.7 2.87-2.5 8.85 1.6 11.9 17.8 9.38 33.7 21.8 49.2 29.7 3.8 1.34 5.4 0 6.2-1.15.8-1.12 1.6-3.22-1.7-6.09-14.7-12-29.7-23.8-44.5-35.7-4.3-3.83-8.2-1.56-10.8 1.3z"fill="#fc0"/></g><g id="$ball"><circle cx="670"cy="351"r="14.5"fill="url(#radialGradient6087-1)"/><circle cx="670"cy="351"r="14.5"fill="url(#radialGradient6065-2)"/></g><path id="$plunger"d="M716 342h53v18.2h-53z"fill="maroon"stroke="#fc0"stroke-linejoin="round"stroke-width="2"/><g id="$tree"stroke-linejoin="round"><path d="M826 346h19.7v26.1H826z"fill="#502d16"stroke="#28170b"/><path d="M816 324s-10.9 20-17 29.7c8.1-3.6 12.6-4.6 18.7-7.6l10.6 12.3 13.8-9.7 16.4 8.4 2.6-8.6 8.5 2.9c-7.4-10.5-19.3-34.9-19.3-34.9z"fill="#89a02c"stroke="#677821"/><path d="M844 300l-19.9 3.8c-4.3 9.5-9.8 18.3-15.1 27.2l8.7-4.8 5.5 6.9 4.8-7.7 6.7 12.6 8.1-12.4 5.3 8.5 4-9.7 10.6 6.7z"fill="#abc837"stroke="#89a02c"/><path d="M818 312c2.8-1 6.8-2.8 9.5-4.9 3.1 2.7 4.8 7.6 8.6 10.5 1.6 0 4-11 5.2-10.7 4 1.4 8.5 3.9 12.9 5.8-6.3-12.3-12.7-27.2-18.3-37.6-5.7 12.8-11.3 24.2-17.9 36.9z"fill="#bcd35f"stroke="#abc837"/></g><g id="$iron"><path d="M931 347c-.4-1.3-.5-3.3-.4-4.4.7-1.3 1.9-3.4 1.9-3.4s-1.2-4.7-1-6.3c2-2.7 4.5-5.4 7.2-6.9 5.3-1.3 13.8-2.1 13.8-2.1s4.2 1.5 4.7 2.2c.7.9-.1 1.2.9 2.9 1.2 1.2 3.2 3.3 3.2 3.3l-.4 1.9s1.3 1.8 1.4 2.4c-.1 1.8-.9 2.7-1.4 4.5 1.3 2.5 1.5 4.4 1.1 7.2-2.5 2.3-5.5 5.3-7.2 6.2-5.1 0-14.7 2-14.7 2s-1.1 3.7-2.2 5.4c-.3.5-1.7.8-2.2.9-1.6.1-3 .6-4.4 1.3-2.6.2-5.7-.2-7.9-1.5-.6-.8-.8-1.5-.9-1.9-.1-2-1-3.1-1-3.1s1.7-2.1 2-3.1c.4-1.4 0-4.3 0-4.3s2.2-1.4 3.8-1.4c.8-.9 1.6-1.9 1.6-1.9s.9.4 2.1.1z"fill="#999"stroke="#333"/><path d="M928 353c.3-.2.8-1.6 1.4-1.8 1.3.5 2.6 1.9 3.4 2.6-.8 1.4-1.4 3.4-2.4 2.8-1.7-1.2-4.6-2.2-2.4-3.6zm20.1-25.7c1 5.1 2.9 3.6 5.6 1.6-.5-1.8-1.6-2.2-3.2-3.5-1.1.5-1.9.8-2.4 1.9zm-10.7 5c1.3-1.3 4.3-2.4 5.1-2 .4 2.7 2.3 6.3.6 6.9-2 1.1-3.7 3.3-4.9 2.2-.1-2.6-1.6-4.9-.8-7.1z"fill="#d45500"stroke="#a40"/><path d="M950 344c-1 .6-2 .8-2.8 1.8-.6 4.9-3.4 2.5-5.8 3.9-1-1.3-2.4-3.5-3-4.7-3.6-3-4.2-.6-7.7 0 0 .8.1 1.7.3 2.3 4.6-1.9 7.3 2.4 9 5.3-4.2 6-10.8 9.3-17.5 8.3 3.7 5.8 8.6 2.9 13.2 2.3 2.5-.4 2.9-1.5 4.4-6.3 19.7-3.8 11.9.7 21.8-8.2.8-2.7-.1-5-1-7.3.5-1.6 1.2-3.1 1.4-4.5-2.7-3.5 1.1-3.6-4.2-7.6-.9-3.1-1.9-4.3-5.6-5.1 6.3 11.8 1.8 17.3-2.5 19.8z"opacity=".3"/></g><g id="$gold"><path d="M974 477h38.6v52.7H974z"fill="#ffdd4f"/><g stroke="#d4aa00"><path d="M1000 508a7.99 15.5 30 01-14.6 9.4 7.99 15.5 30 01.8-17.4 7.99 15.5 30 0114.8-9.4 7.99 15.5 30 01-1 17.4"fill="#ffd42a"/><path d="M999 507a7.99 15.5 30 01-14.6 9.4 7.99 15.5 30 01.8-17.4 7.99 15.5 30 0114.4-9.4 7.99 15.5 30 01-.6 17.4"fill="#ffd42a"/><path d="M989 507l4.7-7.5"fill="#a80"stroke-linejoin="round"stroke-width="2"/></g></g><g id="$lance"fill="#fff"stroke="#000"stroke-width=".5"><path d="M661 559l2-1.8.6.5-1.9 1.8h2.2l3.9-6.1-6.8 3.5z"/><path d="M660 558v2.3h2.5l-.7.8h-1.1l-1.1 1-.4-.5-5.5 4.8-.6-.5 5.4-4.9-.4-.4 1-.9v-1.1z"/></g><g id="$sword"fill="#fff"stroke="#000"stroke-width=".5"><path d="M718 561l7.3-6.7h3.3v2.9l-7.4 6.7z"/><path d="M716 561l1.1-.9 4.8 4.4-1 .9zM715 561l2-1.8-2.5-.4zM723 565l-2 1.8 3 .4zM717 563l-1.3 1.2h-2.5v4h4.5V566l1.3-1.2zm-2.1 2.6h1.2v1.1h-1.2z"/></g><g id="$gutter"stroke="#000"color="#000"><path d="M1028 10.2v153l218-.6v-46.8c0-.7 0-1.2-1-1.7-29-14-217-104-217-104z"fill="#fc0"/><path d="M1031 14.5l212 101v44.6h-212z"fill="maroon"/></g><g id="$small-mine-wall"stroke-width="2"><path d="M650 451c-3.3-12.8 8.8-26.5 21.9-21 31.4 2.9 61.5-3.8 89.3-.6 6.2 6.9 7.4 24.2-.3 29.7-28.4-.8-110 2.9-111-8.1z"fill="#666"stroke="#1a1a1a"/><path d="M756 454c-29.2-.6-73 5.7-105-5-5.5 12.8 65.1 10.7 110 10.6 7.7-5.5 6.5-22.8.3-29.8-3.2 3.4 2.9 17.3-5.7 24.2z"opacity=".3"/></g><path id="$check"d="M107 19.4l-21.8 23-17.1-18.9-7.3 6.7 17.6 19.4-16.8 17.7 7.2 6.8 16.3-17.2 16 17.6 7.3-6.6-16.5-18.1 22.3-23.5z"fill="#d40000"stroke="#000"/><path id="$cross"d="M155 59.8c-4.2-4-10.6-9.42-19.7-11.5 1.5 10.9 18.3 26 21.1 26.5 11.1-20.3 27.4-42 34.2-55.6-14.6 10-30 31.4-35.5 40.6z"fill="#0f0"stroke="#000"/><path d="M1200 167h22v701h-22z"fill="url(#pattern2065)"id="$fence"/><g id="$sign"><path d="M201 161c-1.7 0-3 1.3-3 3v70.3c0 1.7 1.3 3 3 3h113c1.7 0 3-1.3 3-3V164c0-1.7-1.3-3-3-3z"fill="#deaa87"stroke="#000"/><path d="M201 164h113v70.3H201z"fill="maroon"/></g><g id="$enemy"><g stroke="#000"><path d="M721 667c0 3.1-2 5.3-4.5 5.3-8.9-2-4.5-9.7.8-10.9 2.5 0 3.7 2.5 3.7 5.6zm-27.2-7.7c2.4-1.2 8-2.5 11.2 1.8 1.4-.4.8-.5 2.8-.3 4.6 5.8.7 11.1-5.5 10-6.7.6-10.1-5.5-8.5-11.5zm-6.1 27.3c.4 17.7 11.2 14.5 10.8.8-.2-2.4-1.1-5.1-1.8-6-2 1.5-7 3.9-9 5.2zm-15.2 1.6c-.9 2.7-.2 8.7 4 8.5 2.8-.2 6.3-2.8 6.2-6.3-.5-7.9-7.2-4-10.2-2.2zm2.3-14.7c-4.5 0-8.1-3-8.1-6.7s3.6-6.7 8.1-6.7"fill="#fca"/><path d="M706 670c2.5-4.4 1.5-7.6 1.4-10.1 3-.7 6.8 1.2 6.4 7.5-.2 3.8-5.3 3.8-7.8 2.6zm-7.6 20.9c.9 3 1.2 7.6 1.1 10.5 9.5 8.5-13.9 6.9-13.6.5.8-2.5.3-7.2 1.6-10.3 5.5 2 7.2.5 10.9-.7zm-26.8.8c-.9 3.1-.7 6.2-.6 9.2-9.5 8.4 13.5 6.3 13.2 1.6-.9-2.5-.2-8.6-1.5-11.6-5.8 2.3-5.3 2.1-11.1.8zm3.6-30.9c-4.3 18.2 1.5 26.8 21.8 18.3-1.5-5.5-.5-4.1-.3-8.5-.6-4.2.7-10.1-5-10.6-4.9.7-11.5.5-16.4.8z"fill="#502d16"/><path d="M681 687c.8 1.7 4.1 1.4 6.1 1.2 3.1-2.2 5.9-3 9.7-5.6 1.8-1.2 1.1-3.5-1.1-2.5-7.9 1.4-14.3 3.9-14.7 6.9z"fill="#04a"/><path id="$armor.fx"d="M687 678c0 7.2-6.8 13.1-15.1 13.1-8.4 0-15.2-5.9-15.2-13.1s6.8-13.1 15.2-13.1c8.3 0 15.1 5.9 15.1 13.1m7.3-16.5c-.1-11.3-1.3-22.1-10.8-21.4-11 .8-9.8 15.3-8.8 24.1 2.4 1.1 8 1.8 10.3 1.7 3.6-.4 7.5-2.2 9.3-4.4z"fill="#d4aa00"/></g><path d="M682 655l3.6-.1-.2-4.5s5.4-.2 6.2 1.9c1.5 3.9-5.5 4.1-5.5 4.1l.5 8.9h-4.4l-.2-8.8s-6.3.9-6-3.7c.1-1.9 5.8-2.2 5.8-2.2z"/><path d="M718 634c3.9-6.6 4.9-14.7 8.1-22.6 5.2 9.3 2.6 27.6 0 38.2-4.6.6-5.6 11.8-5.6 11.8l-4.1-.7s3.8-20.6 1.6-26.7z"fill="#afc6e9"stroke="#000"/><path d="M690 654a.839.839 0 01-.8.9.839.839 0 01-.8-.9.839.839 0 01.8-.8.839.839 0 01.8.8m-9.1.2a.839.839 0 01-.8.8.839.839 0 01-.9-.8.839.839 0 01.9-.9.839.839 0 01.8.9z"fill="red"/><path transform="rotate(7.82)"d="M796 556h10.1v2.7H796z"fill="#fc0"stroke="#000"/></g><g id="$bumper"><ellipse cx="1018"cy="342"rx="21"ry="18.8"fill="#540000"/><ellipse cx="1018"cy="335"rx="25.8"ry="21.8"fill="#fc0"stroke="#000"/><path d="M1010 314l-1 8.8-13.2 1 7.2 6.9-9.6 9 13.6-.5-1 14.1 11-9.2 9 10.3 1-13.4 14 1.5-8-9 9-6.5-13-2.4-1-9.4-7 4.3-4-.8z"fill="maroon"stroke-width="2"/><ellipse cx="1018"cy="330"rx="14.2"ry="11.8"fill="maroon"stroke="#000"/><ellipse cx="1018"cy="329"rx="12"ry="9.7"fill="#600"/></g><g id="$deflector"><path d="M1125 456l-64-61.5v-4.1l63 .3z"fill="#a68400"stroke="#000"/><path d="M1125 453l-64-62.7h64z"fill="#fc0"stroke="#000"stroke-linejoin="round"/><path d="M1123 449l-58-57h58z"fill="maroon"/></g><g id="$axe"fill="#fff"stroke="#000"stroke-width=".5"><path d="M696 555c.2-.3.6-.2.8 0 .3.2.3.4.1.7l-8.4 8.4c.4.2.2.6-.1.8-1.1 1.1-3.3 3.7-3.5 3.6-.4 0-1.6-1.1-1.6-1.4-.2-.3 2.6-2.7 3.7-3.8.2-.2.6.2.6.2 2.8-2.8 5.6-5.6 8.4-8.5zM693 560l2.9-3c1 .2 1.7-.1 2.5-.6.5 4.1-2.4 6.1-5.9 5.8.7-.7.7-1.5.5-2.2zM694 556l-3 3.2c-1.1-.3-1.9.1-2.7.6-.6-4.5 1.5-6.6 6.3-6.1-.8.7-.8 1.6-.6 2.3z"/></g></g><g id="$layer2"><path id="$kicker.collider.3"d="M616 11.7l69.5 114-15.2 4-62.4-103z"/><path id="$kicker.collider.1"d="M616 11.6L607.7 8l-7.6 6v77.6h14.2z"/><path id="$kicker.collider.2"d="M600 91.6l73.7 45 8.4-2 3.1-9-73.3-42z"/><path id="$bend.2.collider"d="M730 10.8h12.5v170l-12.8-5z"/><path id="$bend.1.collider"d="M734 179l148 86.7 6.7-11-146-84.7z"/><path id="$flipper.collider"d="M927 23.5l5-3.9 6-.7 52.2 41.4.7 7.5-4.6 3.8h-6.1l-52.9-30.9-3.9-7.9z"/><path id="$ball.collider"d="M683 358l-3 3-3 2.2-3 1.3-4 .3-4-.6-3-1.6-3-2.5-3-3.1-1-3.6v-7.6l2-3.4 2-3 4-2.2 3-1.3 4-.3 4 .6 3 1.6 3 2.5 2 3.1 2 3.6v3.8l-1 3.8z"/><path id="$fence.collider"d="M1204 202h13v665h-13z"/><path id="$plunger.collider"d="M716 342h53v18.2h-53z"/><path id="$tree.collider"d="M809 274h54.5v98.3H809z"/><path id="$iron.collider"d="M922 324h41.2v40.9H922z"/><path id="$bumper.collider"d="M998 351l-4-14.2 4-14.3 12.4-9h15l13 8.8 4 14.3-4 14.3-12 8.9h-16z"/><path id="$top-wall.collider"d="M1266 0h800v100h-800z"/><path id="$left-wall.collider"d="M1266 100h100v800h-100z"/><path id="$right-wall.collider"d="M1966 100h100v800h-100z"/><path id="$gold.collider"d="M974 477h38.8v52.5H974z"/><path id="$enemy.collider"d="M665 636h56.9v71.5H665z"/><path id="$small-mine-wall.collider"d="M650 429h117v31.4H650z"/><path id="$deflector.collider"d="M1065 393l61 59.1v-59.6z"/><path id="$gutter.collider"d="M1027 10v153h218v-49z"/></g></svg></div><script>!function(t){var s={};function i(h){if(s[h])return s[h].t;var e=s[h]={s:h,i:!1,t:{}};return t[h].call(e.t,e,e.t,i),e.i=!0,e.t}i.h=t,i.c=s,i.d=function(t,s,h){i.o(t,s)||Object.defineProperty(t,s,{l:!0,get:h})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},i.p=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.u)return t;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{l:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)i.d(h,e,function(s){return t[s]}.bind(null,e));return h},i.n=function(t){var s=t&&t.u?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.m="",i(i.M=0)}([function(t,s,i){"use strict";i.r(s);const h=!1,e=600,n=800,r=1,o=1e3,a=3e4,l=Math.PI/2.5,c=15,u=1e4,w=20,d=1,p=50,f=100,m=2e3,y=1e3,b=2,M=20,g=2,v=800,x=45e3,C=.25,S=1.5,D=.1,_=.5;class k{g(t){let s=[];for(let i=0;i<t.v.length;i++){const h=t.v[i],e=t.v[(i+1)%t.v.length].M(h).n();s[i]=e.m()}return s}C(t,s){const i=this.g(t).concat(this.g(s));let h=null,e=null;for(let n of i){const i=this.S(t.D(n),s.D(n));if(null==i)return null;(null==e||Math.abs(i)<Math.abs(e))&&(e=i,h=n)}return h.h(e)}S(t,s){if(t.max<s.min||s.max<t.min)return null;const i=Math.max(t.min,s.min),h=Math.min(t.max,s.max);let e=Math.sign(t.min-s.min);return 0==e&&(e=Math.sign(t.max-s.max)),e*(h-i)}}class ${resolve(t,s,i){const h=i.n(),e=h.d(t.speed.h(t._*s._))-(s.k?0:h.d(s.speed.h(t._*s._)));return e<0&&(t.$(h.h(-e)),t.translate(i)),i.i()}}class H{constructor(){this.H=new k,this.j=new $,this.A={L:null,P:null}}update(t,s){if(s.F)return;const i=this.H.C(t.B(),s.B());if(null!=i)if(null!=s.O&&s.O(i),s.W){const h=this.j.resolve(t,s,i);null!=s.V&&s.V(h)}else null==this.A.L&&null==this.A.P&&s.R&&s.R(),this.A.L=t,this.A.P=s;null==i&&this.A.L==t&&this.A.P==s&&(s.T&&s.T(),this.A.L=null,this.A.P=null)}}let j,A,L,P,F,B,O,W=void 0;j=(...t)=>A(L(...t)),A=(...t)=>{let s=O.createBufferSource(),i=O.createBuffer(t.length,t[0].length,B);return t.map((t,s)=>i.getChannelData(s).set(t)),s.buffer=i,s.connect(O.destination),s.start(),s},L=(t=1,s=.05,i=220,h=0,e=0,n=.1,r=0,o=1,a=0,l=0,c=0,u=0,w=0,d=0,p=0,f=0,m=0,y=1,b=0,M=0)=>{let g,v,x=2*Math.PI,C=a*=500*x/B**2,S=(0<p?1:-1)*x/4,D=i*=(1+2*s*Math.random()-s)*x/B,_=[],k=0,$=0,H=0,j=1,A=0,L=0,P=0;for(l*=500*x/B**3,p*=x/B,c*=x/B,u*=B,w=B*w|0,v=(h=99+B*h)+(b*=B)+(e*=B)+(n*=B)+(m*=B)|0;H<v;_[H++]=P)++L%(100*f|0)||(P=r?1<r?2<r?3<r?Math.sin((k%x)**3):Math.max(Math.min(Math.tan(k),1),-1):1-(2*k/x%2+2)%2:1-4*Math.abs(Math.round(k/x)-k/x):Math.sin(k),P=(w?1-M+M*Math.sin(2*Math.PI*H/w):1)*(0<P?1:-1)*Math.abs(P)**o*t*F*(H<h?H/h:H<h+b?1-(H-h)/b*(1-y):H<h+b+e?y:H<v-m?(v-H-m)/n*y:0),P=m?P/2+(m>H?0:(H<v-m?1:(v-H)/m)*_[H-m|0]/2):P),g=(i+=a+=l)*Math.sin($*p-S),k+=g-g*d*(1-1e9*(Math.sin(H)+1)%2),$+=g-g*d*(1-1e9*(Math.sin(H)**2+1)%2),j&&++j>u&&(i+=c,D+=c,j=0),!w||++A%w||(i=D,a=C,j=j||1);return _},F=.3,B=44100,O=new(top.AudioContext||webkitAudioContext),P=(t,s,i,h=125)=>{let e,n,r,o,a,l,c,u,w,d,p,f,m,y,b,M=0,g=[],v=[],x=[],C=0,S=0,D=1,_={},k=B/h*60>>2;for(;D;C++)g=[D=u=p=m=0],i.map((h,p)=>{for(c=s[h][C]||[0,0,0],D|=!!s[h][C],b=m+(s[h][0].length-2-!u)*k,y=p==i.length-1,n=2,o=m;n<c.length+y;u=++n){for(a=c[n],w=n==c.length+y-1&&y||d!=(c[0]||0)|a|0,r=0;r<k&&u;r++>k-99&&w?f+=(f<1)/99:0)l=(1-f)*g[M++]/2||0,v[o]=(v[o]||0)-l*S+l,x[o]=(x[o++]||0)+l*S+l;a&&(f=a%1,S=c[1]||0,(a|=0)&&(g=_[[d=c[M=0]||0,a]]=_[[d,a]]||(e=[...t[d]],e[2]*=2**((a-12)/12),a>0?L(...e):[])))}m=b});return[v,x]};const z=[[[.5,0,143,W,.1,.5,3],[1.6,0,4e3,W,W,.05,2,1.25,W,W,W,W,.02,6.8,-.3,W,.5],[.6,0,23,W,W,.13,3,5]],[[[W,W,13,W,W,W,13,W,13,W,W,W,W,W,W,W,W,W,13,W,W,W,13,W,13,W,W,W,6,W,10,W,12,W,13,W,W,W,13,W,13,W,W,W,W,W,W,W,W,W,8,W,W,W,8,W,8,W,W,W,W,W,W,W,W,W,W],[W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,12,W,W,W,12,W,12,W,W,W,W,W,W,W,W,W,W],[W,W,22,W,W,W,22,W,22,W,W,W,W,W,W,W,W,W,22,W,W,W,22,W,22,W,W,W,W,W,W,W,W,W,22,W,W,W,22,W,22,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,W],[1,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W]],[[W,W,13,W,W,W,13,W,13,W,W,W,W,W,W,W,W,W,13,W,W,W,13,W,13,W,W,W,6,W,10,W,12,W,13,W,W,W,13,W,13,W,W,W,W,W,W,W,W,W,8,W,W,W,8,W,8,W,W,W,W,W,W,W,W,W,W],[W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,12,W,W,W,12,W,12,W,W,W,W,W,W,W,W,W,W],[W,W,22,W,W,W,22,W,22,W,W,W,W,W,W,W,W,W,22,W,W,W,22,W,22,W,W,W,W,W,W,W,W,W,22,W,W,W,22,W,22,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,W],[1,W,W,W,W,W,W,W,W,W,13,13,W,13,W,W,13,W,W,W,W,W,W,W,W,W,13,W,13,W,13,W,13,W,W,W,W,W,W,W,W,W,W,W,13,W,W,W,13,W,W,W,W,W,W,W,W,W,13,13,W,13,13,W,13,13]],[[W,W,13,W,W,W,13,W,13,W,W,W,W,W,W,W,W,W,13,W,W,W,13,W,13,W,W,W,6,W,10,W,12,W,13,W,W,W,13,W,13,W,W,W,W,W,10,W,W,W,8,W,W,W,8,W,8,W,W,W,W,W,W,W,W,W,W],[W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,13,W,W,W,12,W,W,W,12,W,12,W,W,W,W,W,W,W,W,W,W],[W,W,22,W,W,W,22,W,22,W,W,W,5,W,10,W,12,W,22,W,W,W,22,W,22,W,W,W,12,W,10,W,5,W,22,W,W,W,22,W,22,W,W,W,W,W,18,W,W,W,17,W,W,W,17,W,6,W,W,W,W,W,W,W,W,W,W],[1,W,W,W,W,W,W,W,W,W,13,13,W,13,W,W,13,W,W,W,W,W,W,W,W,W,13,W,13,W,13,W,13,W,W,W,W,W,W,W,W,W,W,W,13,W,W,W,13,W,W,W,W,W,W,W,W,W,13,13,W,13,13,W,13,13],[2,W,13,17,13,17,13,20,13,20,W,W,W,W,W,W,W,W,13,17,13,17,13,12,13,12,W,W,W,W,W,W,W,W,13,17,13,17,13,12,13,12,W,W,W,W,W,W,W,W,13,17,13,17,13,10,13,10,W,W,W,W,13,20,15,15]],[[W,W,13,W,W,W,13,W,13,W,W,W,12,W,10,W,5,W,13,W,W,W,13,W,13,W,W,W,6,W,10,W,12,W,13,W,W,W,13,W,13,W,W,W,W,W,10,W,W,W,8,W,W,W,8,W,8,W,W,W,W,W,13,W,W,W,W],[W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,W,W,W,W,17,W,W,W,17,W,17,W,W,W,W,W,13,W,W,W,12,W,W,W,12,W,12,W,W,W,W,W,W,W,W,W,W],[W,W,22,W,W,W,22,W,22,W,W,W,5,W,10,W,12,W,22,W,W,W,22,W,22,W,W,W,12,W,12,W,5,W,22,W,W,W,22,W,22,W,W,W,W,W,18,W,W,W,17,W,W,W,17,W,6,W,W,W,W,W,W,W,W,W,W],[1,W,W,W,W,W,W,W,W,W,13,13,W,13,W,W,13,W,W,W,W,W,W,W,W,W,13,W,13,W,13,W,13,W,W,W,W,W,W,W,W,W,W,W,13,W,W,W,13,W,W,W,W,W,W,W,W,W,13,13,W,13,13,W,13,13],[2,W,13,17,13,17,13,20,13,20,W,W,W,W,W,W,W,W,13,17,13,17,13,12,13,12,W,W,W,W,W,W,W,W,13,17,13,17,13,12,13,12,W,W,W,W,W,W,W,W,13,17,13,17,13,10,13,10,W,W,W,W,13,20,15,15]]],[0,1,2,3,2,3,2,3,2,3,2,3],W,W],V=[[[W,0,80,W,.1,.6,2,W,W,W,W,W,W,W,W,.02,.01],[.3,0,80,W,.08,.18,3],[.7,0,22,W,.07,.07,2,0,W,W,.5,.01]],[[[W,W,15,W,18,W,W,W,15,W,18,W,W,W,15,W,18,W,W,W,W,W,10,W,13,W,W,W,10,W,13,W,W,W,10,W,13,W,W,W,W,W,15,W,18,W,W,W,15,W,18,W,W,W,20,W,18,W,W,W,W,W,10,W,13,W,W,W,W,W,13,W,W,W,W,W,W,W,W],[1,W,15,18,22,25,15,18,22,25,15,18,22,25,15,18,22,25,15,18,22,25,10,13,17,20,10,13,17,20,10,13,17,20,10,13,17,20,10,13,17,20,15,18,22,25,15,18,22,27,15,18,22,25,20,24,27,30,15,18,22,25,10,17,24,29,10,13,17,20,10,17,24,30,30,27,24,22]]],[0],140,W],R=[[[1.5,0,43,W,W,.25,W,W,W,W,W,W,W,2],[.5,0,2100,W,W,.2,3,3,W,W,-400,W,W,2],[.7,0,23,W,W,.2,3,5]],[[[W,W,20,W,W,W,20,W,20,W,W,W,20,W,20,W,W,W,20,W,W,W,20,W,20,W,W,W,20,W,20,W,W,W,20,W,W,W,20,W,20,W,W,W,20,W,20,W,W,W,20,W,W,W,20,W,20,W,W,W,20,W,20,W,W,W,W],[1,W,20,W,W,W,20,W,20,W,W,W,20,W,20,W,W,W,20,W,W,W,20,W,20,W,W,W,20,W,20,W,W,W,20,W,W,W,20,W,20,W,W,W,20,W,20,W,W,W,20,W,W,W,20,W,20,W,W,W,20,W,20,W,W,W,W],[2,W,13,W,13,W,13,W,13,W,13,W,13,W,13,W,16,W,13,W,13,W,13,W,13,W,13,W,13,W,13,W,16,W,13,W,13,W,13,W,13,W,13,W,13,W,13,W,16,W,13,W,13,W,13,W,13,W,13,W,16,W,18,W,19,W,W],[W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W]]],[0],120,W],T=[[[.5,0,80,W,.07,.07,2,0,W,W,.5,.01],[2,0,43,W,W,.25,W,W,W,W,W,W,W,2],[1.5,0,4e3,W,W,.03,2,1.25,W,W,W,W,.02,6.8,-.3,W,.5],[.5,0,80,W,.5,.35,3]],[[[W,W,8,W,9,W,13,W,12,W,8,W,9,W,6,W,W,W,8,W,9,W,13,W,12,W,8,W,9,W,14,W,W,W,8,W,9,W,13,W,12,W,8,W,9,W,6,W,W,W,8,W,9,W,13,W,12,W,8,W,9,W,14,W,W,W,W],[1,W,13,W,W,W,W,W,W,W,13,W,W,W,W,W,W,W,13,W,W,W,W,W,W,W,13,W,W,W,W,W,W,W,13,W,W,W,W,W,W,W,13,W,W,W,W,W,W,W,13,W,W,W,W,W,W,W,13,W,W,W,W,W,W,W,W],[2,W,W,W,W,W,13,W,13,W,W,W,W,W,13,W,13,W,W,W,W,W,13,W,13,W,W,W,W,W,13,W,13,W,W,W,W,W,13,W,W,W,W,W,W,W,13,W,13,W,W,W,W,W,13,W,13,W,W,W,W,W,13,W,W,W,W],[3,W,20,W,W,W,W,W,W,W,W,W,W,W,20,W,W,-1,19,W,W,W,W,W,W,W,W,W,W,W,8,W,W,W,13,W,W,W,W,W,W,W,W,W,W,W,25,W,W,-1,8,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W],[3,W,13,W,W,W,W,W,W,W,W,W,W,W,13,W,W,-1,8,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,20,W,W,W,W,W,W,W,W,W,W,W,20,W,W,-1,19,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W]]],[0],140,W],q=[[[.7,0,50,.002,.02,.08,3,W,W,W,W,W,W,W,W,.1,.01],[.3,0,196,W,.08,.5,3]],[[[W,W,13,W,17,W,18,W,22,W,23,W,28],[1,W,13,W,17,W,18,W,22,W,23,W,28]]],[0],180],E=[[[.5,0,190,W,.08,.5,3],[W,0,48,W,W,.2,3,5]],[[[W,W,5,W,5,W,5,W,5,W,W,W,W,W,1,W,W,W,W,W,3,W,W,W,W,W,5,W,W,W,3,W,5],[1,W,5,W,5,W,5,W,5,W,W,W,W,W,1,W,W,W,W,W,3,W,W,W,W,W,5,W,W,W,3,W,5]]],[0],209,W];const I=new class{constructor(){this.q=!1,this.I=P(...z),this.N=P(...V),this.U=P(...R),this.Y=P(...T),this.Z=P(...q),this.G=P(...E)}J(){this.K=A(...this.I),this.K.loop=!0}X(){this.K=A(...this.N),this.K.loop=!0}tt(){this.K=A(...this.U),this.K.loop=!0}st(){this.K=A(...this.Y),this.K.loop=!0}it(){this.K=A(...this.Z)}ht(){this.K=A(...this.G)}et(){this.K&&this.K.stop()}nt(t){F=t}},N=new class{rt(){j(.6,W,1300,W,.05,.5,1,2,W,W,1300,.07,W,W,.1,W,W,.9)}ot(t){j(((t>S?S:t)-C)/(S-C)*(_-D)+D,W,200,W,W,W,W,5,W,-.1,600,.3,W,8,W,W,W,.9,.1,.01)}at(){j(.5,W,304,.1,.3,W,5,.1,-46,W,W,W,W,W,-165)}lt(){j(W,W,420,W,.02,.2,4,1.05,-9,W,2e3,.5,W,W,W,.5)}ct(){j(.5,W,304,.1,.3,W,5,.1,-46,W,W,W,W,W,-165),j(W,W,418,0,.02,.2,4,1.15,-8.5,W,W,W,W,.7,W,.1)}ut(){j(W,W,224,.02,.02,.08,1,1.7,-13.9,W,W,W,W,W,6.7)}wt(){j(.4,W,941,W,W,.4,4,.74,-222,W,W,W,W,.8,W,1)}dt(){j(.7,W,1e3,W,.1,.8,W,W,W,W,100,.01,.03)}pt(){j(.2,W,537,.02,.02,.22,1,1.59,-6.98,4.97),j(.5,W,150,.05,W,.05,W,1.3,W,W,W,W,W,3)}};class U{constructor(t,s){this.x=t,this.y=s}d(t){return this.x*t.x+this.y*t.y}m(){return new U(this.y,-this.x)}M(t){return new U(this.x-t.x,this.y-t.y)}i(){return Math.sqrt(this.x**2+this.y**2)}h(t){return new U(this.x*t,this.y*t)}n(){return new U(this.x/this.i(),this.y/this.i())}a(t){return new U(this.x+t.x,this.y+t.y)}static z(){return new U(0,0)}}class Y{constructor(t){this.v=[],this.v=t}D(t){return this.v.reduce((s,i)=>{const h=i.d(t);return h<s.min&&(s.min=h),h>s.max&&(s.max=h),s},{min:this.v[0].d(t),max:this.v[0].d(t)})}translate(t){this.v=this.v.map(s=>s.a(t))}rotate(t,s){const i=Math.cos(s),h=Math.sin(s);this.v=this.v.map(s=>new U(i*(s.x-t.x)-h*(s.y-t.y)+t.x,h*(s.x-t.x)+i*(s.y-t.y)+t.y))}ft(t){const s=[];for(const i of this.v)s.push(new U(i.x+2*(t-i.x),i.y));return new Y(s)}static yt(t,s){if(null!=t.shape){s.beginPath(),s.save(),s.fillStyle="#FF0000",s.translate(t.bt.x,t.bt.y);for(let i=0;i<t.shape.v.length;i++){const h=t.shape.v[i];s.lineTo(h.x,h.y)}s.fill(),s.restore(),s.closePath()}}static Mt(t,s){let i=t.split(""),h="";const e=["v","h","V","H","z"],n=["m","M","l","L","c","z"];let r=0,o=0,a=!1,l=["",""];for(const t in i){let s=!1;const c=i[t];e.includes(c)||n.includes(c)?s=!0:"-"===c?(a=!1,""!==l[0]?(o+=1,o<2&&(l[o]=l[o]+c)):l[o]=c):"."===c?a?(o+=1,l[o]=l[o]+c):(a=!0,l[o]=l[o]+c):" "!==c?l[o]=l[o]+c:(a=!1,o+=1),(o===r||s)&&(a=!1,2===r&&""!==l[0]?h=h+l[0]+","+l[1]+" ":1===r&&""!==l[0]&&(h=h+l[0]+" "),s&&(e.includes(c)?r=1:n.includes(c)&&(r=2),h+=c,"z"!==c&&(h+=" ")),l=["",""],"-"===c&&(l[0]="-"),o=0)}let c=new U(0,0),u=null;const w=h.split(" "),d=[];for(const t of w)switch(t){case"m":case"M":case"v":case"V":case"h":case"H":case"l":case"L":case"z":case"Z":u=t;break;default:const s=t.split(",").map(t=>Number.parseFloat(t));let i=c;switch(u){case"m":i=c.a(new U(s[0],s[1]));break;case"M":i=new U(s[0],s[1]);break;case"v":i=c.a(new U(0,s[0]));break;case"V":i=new U(c.x,s[0]);break;case"h":i=c.a(new U(s[0],0));break;case"H":i=new U(s[0],c.y);break;case"l":i=c.a(new U(s[0],s[1]));break;case"L":i=new U(s[0],s[1])}d.push(i),c=i}for(const t of d)t.x-=s.x,t.y-=s.y;return new Y(d)}}class Z{constructor(t){this.bt=U.z(),this.speed=U.z(),this.gt=t,this.shape=null,this.vt=U.z(),this.xt=U.z(),this._=1,this.k=!0,this.F=!1,this.W=!0}ft(t){this.shape=this.shape.ft(t)}$(t){this.vt=this.vt.a(t)}Ct(t){this.xt=this.xt.a(t)}rotate(t,s){this.shape.rotate(t,s)}translate(t){this.bt=this.bt.a(t)}B(){return new Y(this.shape.v.map(t=>t.a(this.bt)))}update(t){this.speed=this.speed.a(this.vt.a(this.xt).h(1/this.gt*t)),this.translate(this.speed.h(t)),this.vt=U.z()}}const G=new class{constructor(){this.St={},this.Dt={},this._t={},this.kt=null,this.St={},this.Dt={},this._t={}}$t(t,s){const i="data:image/svg+xml;base64,"+btoa(t.outerHTML),h=new Image;h.onload=()=>{this.kt=h,s()},h.src=i}load(t,s){const i=t.getElementById("$layer2");for(const s of i.querySelectorAll("*")){const i=s,h=i.getAttribute("d"),e=t.getElementById(i.id.replace(/(.[0-9])?.collider/g,"")),n=null!=e?e.getBBox():i.getBBox();this.Dt[i.id.substring(1)]=Y.Mt(h,n)}for(const s of t.getElementById("$layer1").querySelectorAll("*")){const t=s;t.getBBox&&(this.St[t.id.substring(1)]=t.getBBox()),t.id.endsWith(".fx")&&(this._t[t.id.substring(1)]=new Path2D(t.getAttribute("d")))}i.style.display="none",this.$t(t,()=>{s(),t.style.display="none"})}};class J{constructor(t,s,i=a,h=null){let e=new Z(h);e.bt=s,e.shape=G.Dt[t+".collider"],e._=i,this.body=e,this.Ht=G.St[t],this.scale=new U(1,1),this.angle=0,this.jt=U.z(),this.offset=new U(0,0)}ft(){null!=this.Ht&&(this.scale=new U(-1,1),this.body.ft(this.Ht.width/2),this.offset.x-=this.Ht.width)}update(t){}At(t){h&&this.body.shape?Y.yt(this.body,t):this.Ht&&(t.save(),t.scale(this.scale.x,this.scale.y),t.translate(this.scale.x*this.jt.x,this.scale.y*this.jt.y),t.rotate(Math.sign(this.scale.x)*this.angle),t.drawImage(G.kt,this.Ht.x,this.Ht.y,this.Ht.width,this.Ht.height,(this.body.bt.x-this.jt.x)/this.scale.x+this.offset.x,(this.body.bt.y-this.jt.y)/this.scale.y+this.offset.y,this.Ht.width,this.Ht.height),t.restore())}}class K extends J{constructor(t,s){super(t,s),this.body.V=t=>this.V(t)}V(t){t>C&&N.ot(t)}}const Q=new class{constructor(){this.value=0,this.Lt(0)}Lt(t){this.value+=t,this.get("s").innerText=this.value.toString()}Pt(t){this.get("o").innerText=t}Ft(t){this.get("d").innerText=t}Bt(){const t=this.get("d");t.style.display="none"==t.style.display?"block":"none"}get(t){return document.getElementById(t)}};class X extends J{constructor(t,s,i,h=a,e=null){super(t,s,h,e),this.Ot=1,this.Wt=1,this.body.O=t=>this.O(),this.Lt=i}O(){this.Ot-=this.Wt,this.Ot<=0&&(this.body.F=!0,Q.Lt(this.Lt))}At(t){this.Ot<=0||super.At(t)}}class tt extends X{constructor(t){super("tree",t,25)}O(){super.O(),yt.zt++,yt.Vt(),N.at(),this.Ot=2}update(t){2==this.Ot&&this.scale.x>0&&(this.scale=this.scale.M(new U(5*t,5*t)))}}class st extends X{constructor(t){super("iron",t,50)}update(t){2==this.Ot&&this.scale.x>0&&(this.scale=this.scale.M(new U(5*t,5*t)))}O(){super.O(),yt.Rt++,yt.Vt(),N.wt(),this.Ot=2}}class it extends J{constructor(t){super("gold",t),this.body.W=!1,this.body.R=()=>this.R(),this.Tt=!1}R(){yt.qt++,yt.Vt(),this.Tt=!this.Tt,Q.Lt(5),N.rt()}At(t){super.At(t),h||this.Tt||(t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(this.body.bt.x,this.body.bt.y,this.Ht.width,this.Ht.height))}}const ht=new class{constructor(){this.Et=[]}update(t){for(const s of this.Et)s.update(t);this.Et=this.Et.filter(t=>t.Ot>0)}At(t){for(const s of this.Et)s.At(t)}};class et{constructor(t,s){this.position=s,this.It=t,this.scale=1,this.Nt=0,this.Ot=500,this.color="white",this.alpha=1,this.Ut=0,this.lineWidth=1,this.fill=!1,this.ft=1}update(t){this.scale+=this.Nt*t,this.alpha+=this.Ut*t,this.alpha<0&&(this.alpha=0),this.alpha>1&&(this.alpha=1),this.Ot-=t}At(t){t.save(),t.globalAlpha=this.alpha,t.strokeStyle=this.color,t.fillStyle=this.color,t.lineWidth=this.lineWidth,this.ft&&t.scale(this.ft,1),t.translate(this.ft*this.position.x,this.position.y),this.fill?t.fill(this.It):t.stroke(this.It),t.restore()}}class nt extends J{constructor(t,s=null){super("bumper",t,x),this.Yt=new J(s,t.a(new U(18*this.scale.x,10*this.scale.y))),this.body.O=()=>this.Zt(),this.Gt=null,this.O=null}Zt(){const t=this.body.bt.M(new U(this.Ht.x,this.Ht.y));let s=new Path2D;s.arc(this.body.bt.x+this.Ht.width/2,this.body.bt.y+this.Ht.height/2,25,0,2*Math.PI),this.Gt=new et(s,t),this.Gt.Ut=-5,this.Gt.Nt=.1,this.Gt.Ot=1.5,this.Gt.lineWidth=2,this.Gt.fill=!0,this.Gt.alpha=.6,ht.Et.push(this.Gt),N.ut(),null!=this.O&&this.O()}update(t){null!=this.Gt&&(this.Gt.Ot>1.45&&(this.scale.x+=1*t,this.scale.y+=1*t),this.Gt.Ot<1.4&&(this.scale.x-=1*t,this.scale.y-=1*t),this.Gt.Ot<1.35&&(this.scale=new U(1,1),this.Gt=null))}At(t){super.At(t),null!=this.Yt&&this.Yt.At(t)}}class rt extends X{constructor(t){super("enemy",t,50,a,1),this.Jt=G._t["armor.fx"],this.body.speed=new U(0,60),this.body.O=()=>this.O(),this.body.W=!1,this.Lt=50}O(){super.O(),N.lt()}update(t){this.body.update(t)}At(t){super.At(t),null==this.Jt||h||0==this.Ot||(t.save(),t.globalAlpha=.7,t.fillStyle="gray",t.translate(this.body.bt.x-657,this.body.bt.y-612),t.fill(this.Jt),t.restore())}}class ot extends rt{constructor(t){super(t),this.body.shape=new Y(this.body.shape.v.map(t=>t.h(2))),this.body.W=!0,this.body.O=()=>this.O(),this.Lt=500,this.Ot=3,this.scale=new U(2,2),this.Jt=null}O(){super.O(),N.ct()}update(t){this.body.bt.y>n&&(this.body.bt.y=-this.Ht.height),super.update(t)}}const at=new class{constructor(){document.addEventListener("keydown",t=>this.Kt(t),!1),document.addEventListener("keyup",t=>this.Qt(t),!1),this.right=!1,this.left=!1,this.Xt=!1}Kt(t){"ArrowRight"==t.key&&(this.right=!0),"ArrowLeft"==t.key&&(this.left=!0)," "==t.key&&(this.Xt=!0)}Qt(t){"ArrowRight"==t.key&&(this.right=!1),"ArrowLeft"==t.key&&(this.left=!1)," "==t.key&&(this.Xt=!1)}};class lt extends J{constructor(t,s){let i,h;1==t&&(i=new U(178,653),h=new U(188,664)),-1==t&&(i=new U(290,653),h=new U(343,664)),super("flipper",i,u),this.ts=t,this.ss=s,this.body.k=!1,-1==t&&this.ft(),this.jt=h,this.hs=-this.ts*l,this.es=c,this.ns=!1}rs(){this.ns=!0}update(t){if(this.ns)if(0==this.angle&&N.pt(),Math.abs(this.angle)<Math.abs(this.hs)){const s=Math.sign(this.hs)*this.es*t,i=this.jt.M(this.ss.body.bt).i()+20;this.angle+=s,this.body.rotate(this.jt.M(this.body.bt),s),this.body.speed=new U(Math.sign(this.hs)*Math.cos(this.angle),-Math.sign(this.hs)*Math.sin(this.angle)).h(1e4*this.es/i)}else this.ns=!1,this.body.speed=U.z();else if(Math.abs(this.angle)>Math.PI/360){const s=-Math.sign(this.hs)*this.es*t,i=this.jt.M(this.ss.body.bt).i()+20;this.angle+=s,this.body.rotate(this.jt.M(this.body.bt),s),this.body.speed=new U(Math.sign(this.hs)*Math.cos(this.angle),-Math.sign(this.hs)*Math.sin(this.angle)).h(-1e4*this.es/i)}else this.ns=!1,this.body.speed=U.z(),this.angle=0;(at.left&&1==this.ts||at.right&&-1==this.ts)&&this.rs()}}class ct extends J{constructor(){super("ball",new U(560,600),d,w),this.os=this.body.bt,this.body.k=!1,this.body.Ct(new U(0,this.body.gt*o))}reset(){this.body.bt=this.os}update(t){this.body.update(t)}}class ut extends J{constructor(){super("plunger",new U(547,663),y,w),this.body.k=!1,this.as=0}update(t){const s=this.body.bt.y;at.Xt?(0==this.as&&N.dt(),this.as<=p?this.body.speed=new U(0,f):this.body.speed=U.z()):this.as>0?this.body.speed=new U(0,-m):(this.body.speed=U.z(),this.as=s-this.body.bt.y),this.body.update(t),this.as+=this.body.bt.y-s}}class wt{constructor(t){this.ts=t,this.L=new Z(null),this.L.bt=new U(101,455),this.L.shape=G.Dt["kicker.collider.1"],this.L._=a,this.L.k=!1,this.P=new Z(null),this.P.bt=new U(101,530),this.P.shape=G.Dt["kicker.collider.2"],this.P._=a,this.P.k=!1,this.Ht=G.St.kicker,this.body=new Z(null),this.body.shape=G.Dt["kicker.collider.3"],-1==t&&(this.body.bt=new U(344,455),this.L.bt=new U(417,454),this.P.bt=new U(348,530),this.P.ft(this.Ht.width/2),this.body.ft(this.Ht.width/2)),1==t&&(this.body.bt=new U(105,455));const s=-1==this.ts?.9:1.05;this.body._=a*s,this.body.speed=new U(0,-v),this.body.k=!1,this.body.O=()=>this.O()}O(){const t=-1==this.ts?new U(17,-15):new U(-1,0),s=this.L.bt.M(new U(this.ts*this.Ht.x,this.ts*this.Ht.y)).a(t),i=new et(G._t["kicker.fx"],s);i.Ut=-.7,i.Nt=.1,i.Ot=1.5,i.ft=this.ts,i.lineWidth=2,ht.Et.push(i);const h=new et(G._t["helmet.fx"],s);h.Ut=-.7,h.Nt=.1,h.Ot=1.5,h.ft=this.ts,ht.Et.push(h),N.ut()}update(t){}At(t){if(h)Y.yt(this.body,t),Y.yt(this.L,t),Y.yt(this.P,t);else{t.save(),t.scale(this.ts,1);const s=-1==this.ts?-this.Ht.width-5:-5;t.drawImage(G.kt,this.Ht.x,this.Ht.y,this.Ht.width,this.Ht.height,this.ts*this.body.bt.x+s,this.body.bt.y,this.Ht.width,this.Ht.height),t.restore()}}}const dt=new class{load(t){this.ls=t,this.ss=new ct,this.cs=new lt(1,this.ss),this.us=new wt(1),this.ws=new lt(-1,this.ss),this.ds=new wt(-1),this.ps=new ut,this.fs=new K("bend.1",new U(45,415)),this.fs.Ht=G.St.bend,this.ms=new K("bend.2",new U(45,415)),this.ys=new K("bend.1",new U(334,414)),this.ys.Ht=G.St.bend,this.ys.ft(),this.bs=new K("bend.2",new U(475,416)),this.Ms=new K("gutter",new U(0,653)),this.gs=new K("gutter",new U(320,653)),this.gs.ft(),this.vs=new K("fence",new U(531,107)),this.xs=new K("deflector",new U(539,0)),this.Cs=new K("left-wall",new U(-100,0)),this.Ss=new K("top-wall",new U(-100,-100)),this.Ds=new K("right-wall",new U(600,0)),this.sign=new K("sign",new U(220,300)),this._s=new Z(1),this._s.bt=new U(540,120),this._s.shape=new Y([new U(0,0),new U(0,100),new U(60,100),new U(60,-50)]),this._s.W=!1,this._s.T=()=>{this.ss.body.bt.y<200&&(this._s.W=!0)},this._s._=a,this.ks="0"}update(t){this.cs.update(t),this.ws.update(t),this.ss.update(t),this.ps.update(t),this.ls.update(this.ss.body,this.cs.body),this.ls.update(this.ss.body,this.us.body),this.ls.update(this.ss.body,this.us.L),this.ls.update(this.ss.body,this.us.P),this.ls.update(this.ss.body,this.ws.body),this.ls.update(this.ss.body,this.ds.body),this.ls.update(this.ss.body,this.ds.L),this.ls.update(this.ss.body,this.ds.P),this.ls.update(this.ss.body,this.ps.body),this.ls.update(this.ss.body,this.fs.body),this.ls.update(this.ss.body,this.ms.body),this.ls.update(this.ss.body,this.ys.body),this.ls.update(this.ss.body,this.bs.body),this.ls.update(this.ss.body,this.Ms.body),this.ls.update(this.ss.body,this.gs.body),this.ls.update(this.ss.body,this.vs.body),this.ls.update(this.ss.body,this.xs.body),this.ls.update(this.ss.body,this.Cs.body),this.ls.update(this.ss.body,this.Ss.body),this.ls.update(this.ss.body,this.Ds.body),this.ls.update(this.ss.body,this._s),this.ss.body.bt.y>n&&(this.ss.body.translate(this.ss.os.M(this.ss.body.bt)),this._s.W=!1)}$s(t){const s=t.createLinearGradient(300,0,300,800);s.addColorStop(0,"#9BD077"),s.addColorStop(1,"#71c837"),t.fillStyle=s,t.fillRect(0,0,e,n),t.fillStyle="white",this.sign.At(t),t.font="48px serif",t.fillText(this.ks,235,355),this.fs.At(t),this.ms.At(t),this.ys.At(t),this.bs.At(t),this.us.At(t),this.ds.At(t),this.Ms.At(t),this.gs.At(t),this.xs.At(t),this.Cs.At(t),this.Ss.At(t),this.Ds.At(t)}Hs(t){this.cs.At(t),this.ws.At(t),this.ps.At(t)}js(t){this.ss.At(t),this.vs.At(t)}};const pt=new class{constructor(){this.entities=[],this.ks="-404",this.text="(404 BC) Victory is ours! The Delian League and Athens surrendered. The Peloponnesian War will be remembered as a great victory of Sparta.\n\nCredits:\n\nBarthélémy Renucci\nAdrian Lissot\nDavid Sebaoun\nFlorent Perez"}load(t){}update(t){}$s(t){dt.$s(t)}Hs(t){}js(t){}As(){setTimeout(()=>I.J(),2500)}Ls(){return!1}Ps(){return null}};const ft=new class{constructor(){this.entities=[],this.ks="-413",this.text="(413 BC) Victory is near, commander. Now is time for war ⚔️. Defeat all incoming Delian soldiers!\n\nHit as many Delian soldiers as possible, and defeat their commander: if he dies, they will most likely surrender to our superiority.\n\nCharge!"}load(t){Q.Pt(""),this.ls=t,this.ss=dt.ss,this.ss.reset(),this.Fs=[];for(let t=0;t<25;t++){const s=Math.floor(t/5),i=t%5;this.Fs.push(new rt(new U(50+100*i,-100-300*s)))}this.Bs=new ot(new U(225,-2e3))}update(t){dt.update(t),ht.update(t);for(const s of this.Fs)s.update(t),s.body.position.y>-s.Ht.height&&this.ls.update(this.ss.body,s.body);this.Bs.update(t),this.ls.update(this.ss.body,this.Bs.body)}$s(t){dt.$s(t)}Hs(t){dt.Hs(t)}js(t){dt.js(t);for(const s of this.Fs)s.body.position.y>-s.Ht.height&&s.At(t);this.Bs.At(t),ht.At(t)}As(){I.st()}Ls(){return 0==this.Bs.Ot}Ps(){return I.et(),I.ht(),pt}};const mt=new class{constructor(){this.Os=["sword","axe","lance"],this.Ws(),this.zs=null,this.Vs=[null,null,null],this.Rs=0,this.ks="-421",this.text="(421 BC) Excellent job, commander. We have all the resources we need to build and equip an army!\n\nLet's show soldiers some strategy. Your enemy's weapon is shown in blue, and you have to hit the right bumper to win the round. Choose your weapon bumper with care:\n\n🗡️ > 🪓\n🪓 > 🔱\n🔱 > 🗡️\n"}load(t){this.Vt(),this.ls=t,this.ss=dt.ss,this.ss.reset(),this.Ts=new nt(new U(19.6,163),"lance"),this.Ts.O=()=>{this.zs="lance",this.qs()},this.Es=new nt(new U(222,11),"axe"),this.Es.O=()=>{this.zs="axe",this.qs()},this.Is=new nt(new U(413,163),"sword"),this.Is.O=()=>{this.zs="sword",this.qs()},this.Ns=G.St.cross,this.Us=G.St.check}Ws(){const t=Math.floor(3*Math.random());this.Ys=this.Os[t]}qs(){3!=this.Rs&&("sword"==this.Ys&&"lance"==this.zs||"axe"==this.Ys&&"sword"==this.zs||"lance"==this.Ys&&"axe"==this.zs?(this.Vs[this.Rs]=!0,this.Rs++,this.Vt(),Q.Lt(100),this.Ws()):(this.Vs[this.Rs]=!1,Q.Lt(-10)))}update(t){dt.update(t),this.Es.update(t),this.Is.update(t),this.Ts.update(t),this.ls.update(this.ss.body,this.Es.body),this.ls.update(this.ss.body,this.Is.body),this.ls.update(this.ss.body,this.Ts.body),ht.update(t)}$s(t){dt.$s(t),t.fillStyle="#0d5eaf",t.strokeStyle="white",t.rect(365,300,60,77),t.fill(),t.stroke()}Hs(t){dt.Hs(t);const s=G.St[this.Ys];t.drawImage(G.kt,s.x,s.y,s.width,s.height,375,321,2.5*s.width,2.5*s.height);let i=this.Vs[this.Rs];null==i&&0!=this.Rs&&this.Vs[this.Rs-1]&&(i=this.Vs[this.Rs-1]);let h=null==i?null:i?this.Us:this.Ns;null!=h&&t.drawImage(G.kt,h.x,h.y,h.width,h.height,150,310,h.width,h.height),this.Es.At(t),this.Is.At(t),this.Ts.At(t)}js(t){dt.js(t),ht.At(t)}Ls(){return 3==this.Vs.filter(t=>1==t).length}Vt(){Q.Pt(`Win: ${this.Rs} / 3`)}As(){I.tt()}Ps(){return I.et(),I.it(),this.ks="-404",ft}};const yt=new class{constructor(){this.zt=0,this.qt=0,this.Rt=0,this.ks="-431",this.text=`(431 BC) Welcome, commander. The Spartan assembly voted war ⚔️ against our forever enemy, Athens and its Delian League. Commander, you must to lead Sparta and the Peloponnesian League to victory!\nWe need to be ready as soon as possible, but we're missing resources, strategy and soldiers.\n\nWe first need to collect some resources for our army:\n\n🌲 ${g} units of wood\n⛏️ ${b} units of iron\n📀 ${M} gold\n`,this.entities=[]}load(t){this.Vt(),this.ls=t,this.ss=dt.ss,this.entities=[new K("small-mine-wall",new U(0,220)),new tt(new U(175,0)),new tt(new U(150,150)),new tt(new U(373,266)),new st(new U(10.9,8.75)),new st(new U(114,7.95)),new st(new U(116,90.9)),new st(new U(75.9,177)),new st(new U(11.4,167)),new it(new U(77.5,318)),new it(new U(282,402)),new it(new U(310,91.8)),new nt(new U(14.8,83.6))]}update(t){dt.update(t);for(let s of this.entities)s.update(t),this.ls.update(this.ss.body,s.body);this.entities[9].Tt&&this.entities[10].Tt&&this.entities[11].Tt&&(this.entities[9].Tt=!1,this.entities[10].Tt=!1,this.entities[11].Tt=!1,this.qt+=5,Q.Lt(100),this.Vt()),ht.update(t)}$s(t){dt.$s(t)}Hs(t){dt.Hs(t);for(let s=2;s<this.entities.length;s++)this.entities[s].At(t)}js(t){dt.js(t),this.entities[0].At(t),this.entities[1].At(t),ht.At(t)}Ls(){return this.zt>=g&&this.qt>=M&&this.Rt>=b}As(){I.X()}Vt(){Q.Pt(`🌲: ${this.zt} / ${g} | ⛏️: ${this.Rt} / ${b} | 📀: ${this.qt} / ${M}`)}Ps(){return I.et(),I.it(),mt}};class bt{constructor(){this.ls=new H,this.Zs=yt,this.Zs==yt?I.J():this.Zs.As(),dt.load(this.ls),this.Zs.load(this.ls),this.Gs=!1,dt.ks=this.Zs.ks,this.Js=!1,Q.Ft(this.Zs.text)}update(t){this.Js?(this.Zs.update(t),this.Zs.Ls()&&(this.Zs=this.Zs.Ps(),dt._s.W=!1,this.Zs.load(this.ls),this.Zs.As(),this.Gs=!1,dt.ks=this.Zs.ks,this.Js=!1,Q.Bt(),Q.Ft(this.Zs.text))):at.Xt&&this.Zs!=pt&&(this.Zs==yt&&(I.et(),I.X()),this.Js=!0,Q.Bt())}At(t){this.Gs||(t.Ks.clearRect(0,0,e,n),this.Zs.$s(t.Ks),this.Gs=!0),t.Qs.clearRect(0,0,e,n),this.Zs.Hs(t.Qs),t.Xs.clearRect(0,0,e,n),this.Zs.js(t.Xs)}}class Mt{constructor(t,s,i){this.Ks=t,this.Qs=s,this.Xs=i}}class gt{constructor(){this.ti=r,this.si=performance.now(),this.ii=this.si,this.hi=document.getElementById("dc"),this.ei=document.getElementById("hc"),this.ni=document.getElementById("sc"),this.context=new Mt(this.ni.getContext("2d"),this.ei.getContext("2d"),this.hi.getContext("2d")),this.ri=new bt}loop(t){window.requestAnimationFrame(t=>this.loop(t));var s=0;if(t>this.si+this.ti){var i=t-this.si;s=Math.floor(i/this.ti)}this.oi(s),this.At(),this.ii=t}oi(t){for(var s=0;s<t;s++)this.si+=this.ti,this.update(this.ti/1e3)}update(t){this.ri.update(t)}At(){this.ri.At(this.context)}}G.load(document.getElementById("svg"),()=>{(new gt).loop(performance.now())})}]);</script></body></html>