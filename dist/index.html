<html><head><style>body{display:flex;flex-direction:column;align-items:center}#svg{left:0;position:absolute;z-index:-1}#d{margin-left:4px;position:absolute;bottom:0;width:92.5%;height:200px;background-color:rgb(128,0,0,95%);border:4px solid #f8f8ff;border-radius:16px;color:#fff;padding:16px;font-family:sans-serif}#s{position:absolute;top:8px;left:100px}#o{position:absolute;top:8px;right:100px}canvas{position:absolute;top:0}.cc{position:relative;width:600px;height:800px;border:1px solid #000}</style></head><body><div><div class="cc"><canvas id="static-canvas"width="600"height="800"></canvas><canvas id="hybrid-canvas"width="600"height="800"></canvas><canvas id="dynamic-canvas"width="600"height="800"></canvas><div id="d"></div><div id="o"></div><div id="s"></div></div><svg id="svg"width="2066"height="900"version="1.1"xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient id="radialGradient6087-1"cx="285"cy="93.5"r="78.4"gradientTransform="matrix(.232 0 0 .214 601 327)"gradientUnits="userSpaceOnUse"><stop stop-color="#fff"offset="0"/><stop stop-color="#fff"offset=".495"/><stop stop-color="#bababa"offset=".624"/><stop offset=".751"/><stop stop-color="#fff"offset="1"/></radialGradient><radialGradient id="radialGradient6065-2"cx="118"cy="104"r="78.4"gradientTransform="matrix(-.25 0 0 -.254 699 377)"gradientUnits="userSpaceOnUse"><stop stop-color="#fff"stop-opacity="0"offset="0"/><stop stop-color="#6c6c6c"stop-opacity="0"offset=".619"/><stop stop-color="#43434f"offset=".699"/><stop stop-color="#fff"stop-opacity="0"offset=".82"/><stop stop-color="#5d5d5d"offset="1"/></radialGradient><pattern id="pattern2065"patternTransform="matrix(1 0 0 1.16 1092 167)"xlink:href="#pattern1097"/><pattern id="pattern1097"width="21.6"height="137.4"patternTransform="translate(1286 292)"patternUnits="userSpaceOnUse"><g transform="matrix(2.62 0 0 3.79 -2.76 -4.55)"stroke="#28170b"stroke-width=".5"><path d="M1.32 3.44v18.8c1.28.91 2.57 1.42 3.97 1.36 1.26-.1 1.98-.52 3.48-1.52l.261-18.5z"fill="#520"stroke-linejoin="round"/><ellipse cx="5.14"cy="3.55"rx="3.84"ry="2.1"fill="#e9c6af"/><path d="M6.13 12.9v24.3H4.26V12.9c.08-.1.811-.35.941-.36.129 0 .711.16.93.36z"fill="#520"stroke-linejoin="round"/></g></pattern></defs><g id="$layer1"><path id="$bend"d="M735 179c-2.2-2.2-3.9-2.9-4-7.2l.5-156c.1-7.26 11.3-6.82 11.3.1l-.8 151c0 1.2-.3 3.3 1.2 4.2l142 81.7c3.3 2.5 2.8 6.3 1.2 8.4s-5.1 2.9-7 1.5z"fill="#999"stroke="#000"stroke-width="2"/><g id="$kicker"><g stroke="#000"><path d="M601 102V87.5c12.5 2.28 11.4 17.1 9.6 19-4.1 2.3-10 1.1-9.6-4.5zM686 142v-14.4c-14.1 3.2-11.2 1.2-11.5 15.2 2.3 7.6 11.3 5.1 11.5-.8z"fill="#fc0"/><path d="M675 142c8.1 1.8 11.7-4.3 10.8-13.3-89.2-66.6-84-35.5-84-35.5s2.1 5.9 4.8 8.1c10.2 6.7 48.6 28.5 68.4 40.7z"fill="#a80"/><path id="$kicker.fx"d="M674 136c3.1 1.9 6.4.8 9.4-2.5s2.7-7.4.8-10.6l-66.1-109c-1.8-3.73-5.6-6.51-10.1-5.8-4 .7-7.4 4.7-7.1 8.8l.2 70.7c.4 3.8 2.1 5.7 4.8 7.9 10.2 6.5 48.2 28.6 68.1 40.4z"fill="#fc0"/><path d="M674 133c1.3.8 4.6 1.3 6.6-.5 1.9-1.8 2.6-3 2.4-4.9-.3-1.8-1-2.7-1.7-3.9 0 0-64.2-106-64.7-107s-1.2-2.39-3.1-3.94c-1.7-1.27-3.5-1.92-5.4-1.32-2.1.65-3.8 3.14-3.5 6.88v67.3c.4 3.47 1.7 5.73 4.2 7.74 9.3 5.92 47.1 28.3 65.2 39.2z"fill="maroon"/></g><path id="$helmet.fx"d="M636 58.8l-1.6 9.2c.7.3 3 1.4 3.7 4l4 1.7-.7 9.4.7 5.1-7.9 12.5V84c1.5-.89 5.2-2.44 5.1-3.9-.1-1.4-6.1-1.9-6.1.2-.1.7.2 7.4-1.1 7.6-1.2-.23-1.3-5.28-1.3-7.42 0-1.89-5.8-2.15-6.1-.38-.2 1.63 3.2 2.98 5 3.9l.1 16.8-8-12.7.9-4.9-.8-9.5 4-1.6c.4-1.5 1.7-3.4 3.6-4l-1.5-9.3c2.9-.49 5.2-.46 8 0z"fill="#fc0"opacity=".709"/></g><g id="$flipper"stroke="#000"><path d="M924 34.4c.6 4.3 3.3 7.9 7 9.6l47.8 28.1c1.3.8 2.7 1.2 4.1 1.2 4.1 0 7.5-3.5 7.5-7.8 0-.7-.1-1.5-.3-2.2-17-10.7-45.8-22.8-66.1-28.9z"fill="#530000"/><path d="M935 18.8c-6.4 0-11.7 5.6-11.7 12.3 0 4.9 2.8 9.4 7.1 11.3l47.9 28.1c1.2.8 2.6 1.3 4 1.3 4.1 0 7.5-3.5 7.5-7.8 0-2.4-1-4.6-2.7-6.1-14.8-12-29.6-24.1-44.4-36.1-2.1-1.72-5.2-2.94-7.7-3z"fill="maroon"/><path d="M929 25c-2.7 2.87-2.5 8.85 1.6 11.9 17.8 9.38 33.7 21.8 49.2 29.7 3.8 1.34 5.4 0 6.2-1.15.8-1.12 1.6-3.22-1.7-6.09-14.7-12-29.7-23.8-44.5-35.7-4.3-3.83-8.2-1.56-10.8 1.3z"fill="#fc0"/></g><g id="$ball"><circle cx="670"cy="351"r="14.5"fill="url(#radialGradient6087-1)"/><circle cx="670"cy="351"r="14.5"fill="url(#radialGradient6065-2)"/></g><path id="$plunger"d="M716 342h53v18.2h-53z"fill="maroon"stroke="#fc0"stroke-linejoin="round"stroke-width="2"/><g id="$tree"stroke-linejoin="round"><path d="M826 346h19.7v26.1H826z"fill="#502d16"stroke="#28170b"/><path d="M816 324s-10.9 20-17 29.7c8.1-3.6 12.6-4.6 18.7-7.6l10.6 12.3 13.8-9.7 16.4 8.4 2.6-8.6 8.5 2.9c-7.4-10.5-19.3-34.9-19.3-34.9z"fill="#89a02c"stroke="#677821"/><path d="M844 300l-19.9 3.8c-4.3 9.5-9.8 18.3-15.1 27.2l8.7-4.8 5.5 6.9 4.8-7.7 6.7 12.6 8.1-12.4 5.3 8.5 4-9.7 10.6 6.7z"fill="#abc837"stroke="#89a02c"/><path d="M818 312c2.8-1 6.8-2.8 9.5-4.9 3.1 2.7 4.8 7.6 8.6 10.5 1.6 0 4-11 5.2-10.7 4 1.4 8.5 3.9 12.9 5.8-6.3-12.3-12.7-27.2-18.3-37.6-5.7 12.8-11.3 24.2-17.9 36.9z"fill="#bcd35f"stroke="#abc837"/></g><g id="$iron"><path d="M931 347c-.4-1.3-.5-3.3-.4-4.4.7-1.3 1.9-3.4 1.9-3.4s-1.2-4.7-1-6.3c2-2.7 4.5-5.4 7.2-6.9 5.3-1.3 13.8-2.1 13.8-2.1s4.2 1.5 4.7 2.2c.7.9-.1 1.2.9 2.9 1.2 1.2 3.2 3.3 3.2 3.3l-.4 1.9s1.3 1.8 1.4 2.4c-.1 1.8-.9 2.7-1.4 4.5 1.3 2.5 1.5 4.4 1.1 7.2-2.5 2.3-5.5 5.3-7.2 6.2-5.1 0-14.7 2-14.7 2s-1.1 3.7-2.2 5.4c-.3.5-1.7.8-2.2.9-1.6.1-3 .6-4.4 1.3-2.6.2-5.7-.2-7.9-1.5-.6-.8-.8-1.5-.9-1.9-.1-2-1-3.1-1-3.1s1.7-2.1 2-3.1c.4-1.4 0-4.3 0-4.3s2.2-1.4 3.8-1.4c.8-.9 1.6-1.9 1.6-1.9s.9.4 2.1.1z"fill="#999"stroke="#333"/><path d="M928 353c.3-.2.8-1.6 1.4-1.8 1.3.5 2.6 1.9 3.4 2.6-.8 1.4-1.4 3.4-2.4 2.8-1.7-1.2-4.6-2.2-2.4-3.6zm20.1-25.7c1 5.1 2.9 3.6 5.6 1.6-.5-1.8-1.6-2.2-3.2-3.5-1.1.5-1.9.8-2.4 1.9zm-10.7 5c1.3-1.3 4.3-2.4 5.1-2 .4 2.7 2.3 6.3.6 6.9-2 1.1-3.7 3.3-4.9 2.2-.1-2.6-1.6-4.9-.8-7.1z"fill="#d45500"stroke="#a40"/><path d="M950 344c-1 .6-2 .8-2.8 1.8-.6 4.9-3.4 2.5-5.8 3.9-1-1.3-2.4-3.5-3-4.7-3.6-3-4.2-.6-7.7 0 0 .8.1 1.7.3 2.3 4.6-1.9 7.3 2.4 9 5.3-4.2 6-10.8 9.3-17.5 8.3 3.7 5.8 8.6 2.9 13.2 2.3 2.5-.4 2.9-1.5 4.4-6.3 19.7-3.8 11.9.7 21.8-8.2.8-2.7-.1-5-1-7.3.5-1.6 1.2-3.1 1.4-4.5-2.7-3.5 1.1-3.6-4.2-7.6-.9-3.1-1.9-4.3-5.6-5.1 6.3 11.8 1.8 17.3-2.5 19.8z"opacity=".3"/></g><g id="$gold"><path d="M974 477h38.6v52.7H974z"fill="#ffdd4f"/><g stroke="#d4aa00"><path d="M1000 508a7.99 15.5 30 01-14.6 9.4 7.99 15.5 30 01.8-17.4 7.99 15.5 30 0114.8-9.4 7.99 15.5 30 01-1 17.4"fill="#ffd42a"/><path d="M999 507a7.99 15.5 30 01-14.6 9.4 7.99 15.5 30 01.8-17.4 7.99 15.5 30 0114.4-9.4 7.99 15.5 30 01-.6 17.4"fill="#ffd42a"/><path d="M989 507l4.7-7.5"fill="#a80"stroke-linejoin="round"stroke-width="2"/></g></g><g id="$lance"fill="#fff"stroke="#000"stroke-width=".5"><path d="M661 559l2-1.8.6.5-1.9 1.8h2.2l3.9-6.1-6.8 3.5z"/><path d="M660 558v2.3h2.5l-.7.8h-1.1l-1.1 1-.4-.5-5.5 4.8-.6-.5 5.4-4.9-.4-.4 1-.9v-1.1z"/></g><g id="$sword"fill="#fff"stroke="#000"stroke-width=".5"><path d="M718 561l7.3-6.7h3.3v2.9l-7.4 6.7z"/><path d="M716 561l1.1-.9 4.8 4.4-1 .9zM715 561l2-1.8-2.5-.4zM723 565l-2 1.8 3 .4zM717 563l-1.3 1.2h-2.5v4h4.5V566l1.3-1.2zm-2.1 2.6h1.2v1.1h-1.2z"/></g><g id="$gutter"stroke="#000"color="#000"><path d="M1028 10.2v153l218-.6v-46.8c0-.7 0-1.2-1-1.7-29-14-217-104-217-104z"fill="#fc0"/><path d="M1031 14.5l212 101v44.6h-212z"fill="maroon"/></g><g id="$small-mine-wall"stroke-width="2"><path d="M650 451c-3.3-12.8 8.8-26.5 21.9-21 31.4 2.9 61.5-3.8 89.3-.6 6.2 6.9 7.4 24.2-.3 29.7-28.4-.8-110 2.9-111-8.1z"fill="#666"stroke="#1a1a1a"/><path d="M756 454c-29.2-.6-73 5.7-105-5-5.5 12.8 65.1 10.7 110 10.6 7.7-5.5 6.5-22.8.3-29.8-3.2 3.4 2.9 17.3-5.7 24.2z"opacity=".3"/></g><path id="$check"d="M107 19.4l-21.8 23-17.1-18.9-7.3 6.7 17.6 19.4-16.8 17.7 7.2 6.8 16.3-17.2 16 17.6 7.3-6.6-16.5-18.1 22.3-23.5z"fill="#d40000"stroke="#000"/><path id="$cross"d="M155 59.8c-4.2-4-10.6-9.42-19.7-11.5 1.5 10.9 18.3 26 21.1 26.5 11.1-20.3 27.4-42 34.2-55.6-14.6 10-30 31.4-35.5 40.6z"fill="#0f0"stroke="#000"/><path d="M1200 167h22v701h-22z"fill="url(#pattern2065)"id="$fence"/><g id="$sign"><path d="M201 161c-1.7 0-3 1.3-3 3v70.3c0 1.7 1.3 3 3 3h113c1.7 0 3-1.3 3-3V164c0-1.7-1.3-3-3-3z"fill="#deaa87"stroke="#000"/><path d="M201 164h113v70.3H201z"fill="maroon"/></g><g id="$enemy"><g stroke="#000"><path d="M721 667c0 3.1-2 5.3-4.5 5.3-8.9-2-4.5-9.7.8-10.9 2.5 0 3.7 2.5 3.7 5.6zm-27.2-7.7c2.4-1.2 8-2.5 11.2 1.8 1.4-.4.8-.5 2.8-.3 4.6 5.8.7 11.1-5.5 10-6.7.6-10.1-5.5-8.5-11.5zm-6.1 27.3c.4 17.7 11.2 14.5 10.8.8-.2-2.4-1.1-5.1-1.8-6-2 1.5-7 3.9-9 5.2zm-15.2 1.6c-.9 2.7-.2 8.7 4 8.5 2.8-.2 6.3-2.8 6.2-6.3-.5-7.9-7.2-4-10.2-2.2zm2.3-14.7c-4.5 0-8.1-3-8.1-6.7s3.6-6.7 8.1-6.7"fill="#fca"/><path d="M706 670c2.5-4.4 1.5-7.6 1.4-10.1 3-.7 6.8 1.2 6.4 7.5-.2 3.8-5.3 3.8-7.8 2.6zm-7.6 20.9c.9 3 1.2 7.6 1.1 10.5 9.5 8.5-13.9 6.9-13.6.5.8-2.5.3-7.2 1.6-10.3 5.5 2 7.2.5 10.9-.7zm-26.8.8c-.9 3.1-.7 6.2-.6 9.2-9.5 8.4 13.5 6.3 13.2 1.6-.9-2.5-.2-8.6-1.5-11.6-5.8 2.3-5.3 2.1-11.1.8zm3.6-30.9c-4.3 18.2 1.5 26.8 21.8 18.3-1.5-5.5-.5-4.1-.3-8.5-.6-4.2.7-10.1-5-10.6-4.9.7-11.5.5-16.4.8z"fill="#502d16"/><path d="M681 687c.8 1.7 4.1 1.4 6.1 1.2 3.1-2.2 5.9-3 9.7-5.6 1.8-1.2 1.1-3.5-1.1-2.5-7.9 1.4-14.3 3.9-14.7 6.9z"fill="#04a"/><path id="$armor.fx"d="M687 678c0 7.2-6.8 13.1-15.1 13.1-8.4 0-15.2-5.9-15.2-13.1s6.8-13.1 15.2-13.1c8.3 0 15.1 5.9 15.1 13.1m7.3-16.5c-.1-11.3-1.3-22.1-10.8-21.4-11 .8-9.8 15.3-8.8 24.1 2.4 1.1 8 1.8 10.3 1.7 3.6-.4 7.5-2.2 9.3-4.4z"fill="#d4aa00"/></g><path d="M682 655l3.6-.1-.2-4.5s5.4-.2 6.2 1.9c1.5 3.9-5.5 4.1-5.5 4.1l.5 8.9h-4.4l-.2-8.8s-6.3.9-6-3.7c.1-1.9 5.8-2.2 5.8-2.2z"/><path d="M718 634c3.9-6.6 4.9-14.7 8.1-22.6 5.2 9.3 2.6 27.6 0 38.2-4.6.6-5.6 11.8-5.6 11.8l-4.1-.7s3.8-20.6 1.6-26.7z"fill="#afc6e9"stroke="#000"/><path d="M690 654a.839.839 0 01-.8.9.839.839 0 01-.8-.9.839.839 0 01.8-.8.839.839 0 01.8.8m-9.1.2a.839.839 0 01-.8.8.839.839 0 01-.9-.8.839.839 0 01.9-.9.839.839 0 01.8.9z"fill="red"/><path transform="rotate(7.82)"d="M796 556h10.1v2.7H796z"fill="#fc0"stroke="#000"/></g><g id="$bumper"><ellipse cx="1018"cy="342"rx="21"ry="18.8"fill="#540000"/><ellipse cx="1018"cy="335"rx="25.8"ry="21.8"fill="#fc0"stroke="#000"/><path d="M1010 314l-1 8.8-13.2 1 7.2 6.9-9.6 9 13.6-.5-1 14.1 11-9.2 9 10.3 1-13.4 14 1.5-8-9 9-6.5-13-2.4-1-9.4-7 4.3-4-.8z"fill="maroon"stroke-width="2"/><ellipse cx="1018"cy="330"rx="14.2"ry="11.8"fill="maroon"stroke="#000"/><ellipse cx="1018"cy="329"rx="12"ry="9.7"fill="#600"/></g><g id="$deflector"><path d="M1125 456l-64-61.5v-4.1l63 .3z"fill="#a68400"stroke="#000"/><path d="M1125 453l-64-62.7h64z"fill="#fc0"stroke="#000"stroke-linejoin="round"/><path d="M1123 449l-58-57h58z"fill="maroon"/></g><g id="$axe"fill="#fff"stroke="#000"stroke-width=".5"><path d="M696 555c.2-.3.6-.2.8 0 .3.2.3.4.1.7l-8.4 8.4c.4.2.2.6-.1.8-1.1 1.1-3.3 3.7-3.5 3.6-.4 0-1.6-1.1-1.6-1.4-.2-.3 2.6-2.7 3.7-3.8.2-.2.6.2.6.2 2.8-2.8 5.6-5.6 8.4-8.5zM693 560l2.9-3c1 .2 1.7-.1 2.5-.6.5 4.1-2.4 6.1-5.9 5.8.7-.7.7-1.5.5-2.2zM694 556l-3 3.2c-1.1-.3-1.9.1-2.7.6-.6-4.5 1.5-6.6 6.3-6.1-.8.7-.8 1.6-.6 2.3z"/></g></g><g id="$layer2"><path id="$kicker.collider.3"d="M616 11.7l69.5 114-15.2 4-62.4-103z"/><path id="$kicker.collider.1"d="M616 11.6L607.7 8l-7.6 6v77.6h14.2z"/><path id="$kicker.collider.2"d="M600 91.6l73.7 45 8.4-2 3.1-9-73.3-42z"/><path id="$bend.2.collider"d="M730 10.8h12.5v170l-12.8-5z"/><path id="$bend.1.collider"d="M734 179l148 86.7 6.7-11-146-84.7z"/><path id="$flipper.collider"d="M927 23.5l5-3.9 6-.7 52.2 41.4.7 7.5-4.6 3.8h-6.1l-52.9-30.9-3.9-7.9z"/><path id="$ball.collider"d="M683 358l-3 3-3 2.2-3 1.3-4 .3-4-.6-3-1.6-3-2.5-3-3.1-1-3.6v-7.6l2-3.4 2-3 4-2.2 3-1.3 4-.3 4 .6 3 1.6 3 2.5 2 3.1 2 3.6v3.8l-1 3.8z"/><path id="$fence.collider"d="M1204 202h13v665h-13z"/><path id="$plunger.collider"d="M716 342h53v18.2h-53z"/><path id="$tree.collider"d="M809 274h54.5v98.3H809z"/><path id="$iron.collider"d="M922 324h41.2v40.9H922z"/><path id="$bumper.collider"d="M998 351l-4-14.2 4-14.3 12.4-9h15l13 8.8 4 14.3-4 14.3-12 8.9h-16z"/><path id="$top-wall.collider"d="M1266 0h800v100h-800z"/><path id="$left-wall.collider"d="M1266 100h100v800h-100z"/><path id="$right-wall.collider"d="M1966 100h100v800h-100z"/><path id="$gold.collider"d="M974 477h38.8v52.5H974z"/><path id="$enemy.collider"d="M665 636h56.9v71.5H665z"/><path id="$small-mine-wall.collider"d="M650 429h117v31.4H650z"/><path id="$deflector.collider"d="M1065 393l61 59.1v-59.6z"/><path id="$gutter.collider"d="M1027 10v153h218v-49z"/></g></svg></div><script>!function(t){var s={};function i(h){if(s[h])return s[h].t;var e=s[h]={s:h,i:!1,t:{}};return t[h].call(e.t,e,e.t,i),e.i=!0,e.t}i.h=t,i.c=s,i.d=function(t,s,h){i.o(t,s)||Object.defineProperty(t,s,{l:!0,get:h})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},i.p=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.u)return t;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{l:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)i.d(h,e,function(s){return t[s]}.bind(null,e));return h},i.n=function(t){var s=t&&t.u?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.m="",i(i.M=0)}([function(t,s,i){"use strict";i.r(s);const h=!1,e=600,n=800,r=1,o=1e3,a=3e4,l=Math.PI/2.5,c=15,u=1e4,w=20,d=1,p=50,f=100,m=2e3,y=1e3,b=2,M=20,g=2,v=800,x=45e3,C=.25,S=1.5,D=.1,_=.5;class k{g(t){let s=[];for(let i=0;i<t.v.length;i++){const h=t.v[i],e=t.v[(i+1)%t.v.length].C(h).normalize();s[i]=e.S()}return s}D(t,s){const i=this.g(t).concat(this.g(s));let h=null,e=null;for(let n of i){const i=this._(t.k(n),s.k(n));if(null==i)return null;(null==e||Math.abs(i)<Math.abs(e))&&(e=i,h=n)}return h.multiply(e)}_(t,s){if(t.max<s.min||s.max<t.min)return null;const i=Math.max(t.min,s.min),h=Math.min(t.max,s.max);let e=Math.sign(t.min-s.min);return 0==e&&(e=Math.sign(t.max-s.max)),e*(h-i)}}class ${resolve(t,s,i){const h=i.normalize(),e=h.$(t.speed.multiply(t.H*s.H))-(s.j?0:h.$(s.speed.multiply(t.H*s.H)));return e<0&&(t.A(h.multiply(-e)),t.translate(i)),i.length()}}class H{constructor(){this.L=new k,this.P=new $,this.F={B:null,O:null}}update(t,s){if(s.W)return;const i=this.L.D(t.V(),s.V());if(null!=i)if(null!=s.R&&s.R(i),s.T){const h=this.P.resolve(t,s,i);null!=s.q&&s.q(h)}else null==this.F.B&&null==this.F.O&&s.I&&s.I(),this.F.B=t,this.F.O=s;null==i&&this.F.B==t&&this.F.O==s&&(s.N&&s.N(),this.F.B=null,this.F.O=null)}}let j,A,L,P,F,z,B;j=(...t)=>A(L(...t)),A=(...t)=>{let s=B.createBufferSource(),i=B.createBuffer(t.length,t[0].length,z);return t.map((t,s)=>i.getChannelData(s).set(t)),s.buffer=i,s.connect(B.destination),s.start(),s},L=(t=1,s=.05,i=220,h=0,e=0,n=.1,r=0,o=1,a=0,l=0,c=0,u=0,w=0,d=0,p=0,f=0,m=0,y=1,b=0,M=0)=>{let g,v,x=2*Math.PI,C=a*=500*x/z**2,S=(0<p?1:-1)*x/4,D=i*=(1+2*s*Math.random()-s)*x/z,_=[],k=0,$=0,H=0,j=1,A=0,L=0,P=0;for(l*=500*x/z**3,p*=x/z,c*=x/z,u*=z,w=z*w|0,v=(h=99+z*h)+(b*=z)+(e*=z)+(n*=z)+(m*=z)|0;H<v;_[H++]=P)++L%(100*f|0)||(P=r?1<r?2<r?3<r?Math.sin((k%x)**3):Math.max(Math.min(Math.tan(k),1),-1):1-(2*k/x%2+2)%2:1-4*Math.abs(Math.round(k/x)-k/x):Math.sin(k),P=(w?1-M+M*Math.sin(2*Math.PI*H/w):1)*(0<P?1:-1)*Math.abs(P)**o*t*F*(H<h?H/h:H<h+b?1-(H-h)/b*(1-y):H<h+b+e?y:H<v-m?(v-H-m)/n*y:0),P=m?P/2+(m>H?0:(H<v-m?1:(v-H)/m)*_[H-m|0]/2):P),g=(i+=a+=l)*Math.sin($*p-S),k+=g-g*d*(1-1e9*(Math.sin(H)+1)%2),$+=g-g*d*(1-1e9*(Math.sin(H)**2+1)%2),j&&++j>u&&(i+=c,D+=c,j=0),!w||++A%w||(i=D,a=C,j=j||1);return _},F=.3,z=44100,B=new(top.AudioContext||webkitAudioContext),P=(t,s,i,h=125)=>{let e,n,r,o,a,l,c,u,w,d,p,f,m,y,b,M=0,g=[],v=[],x=[],C=0,S=0,D=1,_={},k=z/h*60>>2;for(;D;C++)g=[D=u=p=m=0],i.map((h,p)=>{for(c=s[h][C]||[0,0,0],D|=!!s[h][C],b=m+(s[h][0].length-2-!u)*k,y=p==i.length-1,n=2,o=m;n<c.length+y;u=++n){for(a=c[n],w=n==c.length+y-1&&y||d!=(c[0]||0)|a|0,r=0;r<k&&u;r++>k-99&&w?f+=(f<1)/99:0)l=(1-f)*g[M++]/2||0,v[o]=(v[o]||0)-l*S+l,x[o]=(x[o++]||0)+l*S+l;a&&(f=a%1,S=c[1]||0,(a|=0)&&(g=_[[d=c[M=0]||0,a]]=_[[d,a]]||(e=[...t[d]],e[2]*=2**((a-12)/12),a>0?L(...e):[])))}m=b});return[v,x]};const O=[[[.5,0,143,,.1,.5,3],[1.6,0,4e3,,,.05,2,1.25,,,,,.02,6.8,-.3,,.5],[.6,0,23,,,.13,3,5]],[[[,,13,,,,13,,13,,,,,,,,,,13,,,,13,,13,,,,6,,10,,12,,13,,,,13,,13,,,,,,,,,,8,,,,8,,8,,,,,,,,,,],[,,17,,,,17,,17,,,,,,,,,,17,,,,17,,17,,,,,,,,,,17,,,,17,,17,,,,,,,,,,12,,,,12,,12,,,,,,,,,,],[,,22,,,,22,,22,,,,,,,,,,22,,,,22,,22,,,,,,,,,,22,,,,22,,22,,,,,,,,,,17,,,,17,,17,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],[[,,13,,,,13,,13,,,,,,,,,,13,,,,13,,13,,,,6,,10,,12,,13,,,,13,,13,,,,,,,,,,8,,,,8,,8,,,,,,,,,,],[,,17,,,,17,,17,,,,,,,,,,17,,,,17,,17,,,,,,,,,,17,,,,17,,17,,,,,,,,,,12,,,,12,,12,,,,,,,,,,],[,,22,,,,22,,22,,,,,,,,,,22,,,,22,,22,,,,,,,,,,22,,,,22,,22,,,,,,,,,,17,,,,17,,17,,,,,,,,,,],[1,,,,,,,,,,13,13,,13,,,13,,,,,,,,,,13,,13,,13,,13,,,,,,,,,,,,13,,,,13,,,,,,,,,,13,13,,13,13,,13,13]],[[,,13,,,,13,,13,,,,,,,,,,13,,,,13,,13,,,,6,,10,,12,,13,,,,13,,13,,,,,,10,,,,8,,,,8,,8,,,,,,,,,,],[,,17,,,,17,,17,,,,,,,,,,17,,,,17,,17,,,,,,,,,,17,,,,17,,17,,,,,,13,,,,12,,,,12,,12,,,,,,,,,,],[,,22,,,,22,,22,,,,5,,10,,12,,22,,,,22,,22,,,,12,,10,,5,,22,,,,22,,22,,,,,,18,,,,17,,,,17,,6,,,,,,,,,,],[1,,,,,,,,,,13,13,,13,,,13,,,,,,,,,,13,,13,,13,,13,,,,,,,,,,,,13,,,,13,,,,,,,,,,13,13,,13,13,,13,13],[2,,13,17,13,17,13,20,13,20,,,,,,,,,13,17,13,17,13,12,13,12,,,,,,,,,13,17,13,17,13,12,13,12,,,,,,,,,13,17,13,17,13,10,13,10,,,,,13,20,15,15]],[[,,13,,,,13,,13,,,,12,,10,,5,,13,,,,13,,13,,,,6,,10,,12,,13,,,,13,,13,,,,,,10,,,,8,,,,8,,8,,,,,,13,,,,],[,,17,,,,17,,17,,,,,,,,,,17,,,,17,,17,,,,,,,,,,17,,,,17,,17,,,,,,13,,,,12,,,,12,,12,,,,,,,,,,],[,,22,,,,22,,22,,,,5,,10,,12,,22,,,,22,,22,,,,12,,12,,5,,22,,,,22,,22,,,,,,18,,,,17,,,,17,,6,,,,,,,,,,],[1,,,,,,,,,,13,13,,13,,,13,,,,,,,,,,13,,13,,13,,13,,,,,,,,,,,,13,,,,13,,,,,,,,,,13,13,,13,13,,13,13],[2,,13,17,13,17,13,20,13,20,,,,,,,,,13,17,13,17,13,12,13,12,,,,,,,,,13,17,13,17,13,12,13,12,,,,,,,,,13,17,13,17,13,10,13,10,,,,,13,20,15,15]]],[0,1,2,3,2,3,2,3,2,3,2,3],,],W=[[[,0,80,,.1,.6,2,,,,,,,,,.02,.01],[.3,0,80,,.08,.18,3],[.7,0,22,,.07,.07,2,0,,,.5,.01]],[[[,,15,,18,,,,15,,18,,,,15,,18,,,,,,10,,13,,,,10,,13,,,,10,,13,,,,,,15,,18,,,,15,,18,,,,20,,18,,,,,,10,,13,,,,,,13,,,,,,,,],[1,,15,18,22,25,15,18,22,25,15,18,22,25,15,18,22,25,15,18,22,25,10,13,17,20,10,13,17,20,10,13,17,20,10,13,17,20,10,13,17,20,15,18,22,25,15,18,22,27,15,18,22,25,20,24,27,30,15,18,22,25,10,17,24,29,10,13,17,20,10,17,24,30,30,27,24,22]]],[0],140],V=[[[1.5,0,43,,,.25,,,,,,,,2],[.5,0,2100,,,.2,3,3,,,-400,,,2],[.7,0,23,,,.2,3,5]],[[[,,20,,,,20,,20,,,,20,,20,,,,20,,,,20,,20,,,,20,,20,,,,20,,,,20,,20,,,,20,,20,,,,20,,,,20,,20,,,,20,,20,,,,],[1,,20,,,,20,,20,,,,20,,20,,,,20,,,,20,,20,,,,20,,20,,,,20,,,,20,,20,,,,20,,20,,,,20,,,,20,,20,,,,20,,20,,,,],[2,,13,,13,,13,,13,,13,,13,,13,,16,,13,,13,,13,,13,,13,,13,,13,,16,,13,,13,,13,,13,,13,,13,,13,,16,,13,,13,,13,,13,,13,,16,,18,,19,,],[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]]],[0],120],R=[[[.5,0,80,,.07,.07,2,0,,,.5,.01],[2,0,43,,,.25,,,,,,,,2],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.5,0,80,,.5,.35,3]],[[[,,8,,9,,13,,12,,8,,9,,6,,,,8,,9,,13,,12,,8,,9,,14,,,,8,,9,,13,,12,,8,,9,,6,,,,8,,9,,13,,12,,8,,9,,14,,,,],[1,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,],[2,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,,,,,,,13,,13,,,,,,13,,13,,,,,,13,,,,],[3,,20,,,,,,,,,,,,20,,,-1,19,,,,,,,,,,,,8,,,,13,,,,,,,,,,,,25,,,-1,8,,,,,,,,,,,,,,,,],[3,,13,,,,,,,,,,,,13,,,-1,8,,,,,,,,,,,,,,,,20,,,,,,,,,,,,20,,,-1,19,,,,,,,,,,,,,,,,]]],[0],140],T=[[[.7,0,50,.002,.02,.08,3,,,,,,,,,.1,.01],[.3,0,196,,.08,.5,3]],[[[,,13,,17,,18,,22,,23,,28],[1,,13,,17,,18,,22,,23,,28]]],[0],180],q=[[[.5,0,190,,.08,.5,3],[,0,48,,,.2,3,5]],[[[,,5,,5,,5,,5,,,,,,1,,,,,,3,,,,,,5,,,,3,,5],[1,,5,,5,,5,,5,,,,,,1,,,,,,3,,,,,,5,,,,3,,5]]],[0],209];const E=new class{constructor(){this.U=!1,this.Y=P(...O),this.Z=P(...W),this.G=P(...V),this.J=P(...R),this.K=P(...T),this.X=P(...q)}tt(){this.st=A(...this.Y),this.st.loop=!0}it(){this.st=A(...this.Z),this.st.loop=!0}ht(){this.st=A(...this.G),this.st.loop=!0}et(){this.st=A(...this.J),this.st.loop=!0}nt(){this.st=A(...this.K)}rt(){this.st=A(...this.X)}ot(){this.st&&this.st.stop()}at(t){F=t}},I=new class{lt(){j(.6,,1300,,.05,.5,1,2,,,1300,.07,,,.1,,,.9)}ct(t){j(((t>S?S:t)-C)/(S-C)*(_-D)+D,,200,,,,,5,,-.1,600,.3,,8,,,,.9,.1,.01)}ut(){j(.5,,304,.1,.3,,5,.1,-46,,,,,,-165)}wt(){j(,,420,,.02,.2,4,1.05,-9,,2e3,.5,,,,.5)}dt(){j(.5,,304,.1,.3,,5,.1,-46,,,,,,-165),j(,,418,0,.02,.2,4,1.15,-8.5,,,,,.7,,.1)}pt(){j(,,224,.02,.02,.08,1,1.7,-13.9,,,,,,6.7)}ft(){j(.4,,941,,,.4,4,.74,-222,,,,,.8,,1)}yt(){j(.7,,1e3,,.1,.8,,,,,100,.01,.03)}bt(){j(.2,,537,.02,.02,.22,1,1.59,-6.98,4.97),j(.5,,150,.05,,.05,,1.3,,,,,,3)}};class N{constructor(t,s){this.x=t,this.y=s}$(t){return this.x*t.x+this.y*t.y}S(){return new N(this.y,-this.x)}C(t){return new N(this.x-t.x,this.y-t.y)}length(){return Math.sqrt(this.x**2+this.y**2)}multiply(t){return new N(this.x*t,this.y*t)}normalize(){return new N(this.x/this.length(),this.y/this.length())}add(t){return new N(this.x+t.x,this.y+t.y)}static Mt(){return new N(0,0)}}class U{constructor(t){this.v=[],this.v=t}k(t){return this.v.reduce((s,i)=>{const h=i.$(t);return h<s.min&&(s.min=h),h>s.max&&(s.max=h),s},{min:this.v[0].$(t),max:this.v[0].$(t)})}translate(t){this.v=this.v.map(s=>s.add(t))}rotate(t,s){const i=Math.cos(s),h=Math.sin(s);this.v=this.v.map(s=>new N(i*(s.x-t.x)-h*(s.y-t.y)+t.x,h*(s.x-t.x)+i*(s.y-t.y)+t.y))}gt(t){const s=[];for(const i of this.v)s.push(new N(i.x+2*(t-i.x),i.y));return new U(s)}static vt(t,s){if(null!=t.shape){s.beginPath(),s.save(),s.fillStyle="#FF0000",s.translate(t.position.x,t.position.y);for(let i=0;i<t.shape.v.length;i++){const h=t.shape.v[i];s.lineTo(h.x,h.y)}s.fill(),s.restore(),s.closePath()}}static xt(t,s){let i=t.split(""),h="";const e=["v","h","V","H","z"],n=["m","M","l","L","c","z"];let r=0,o=0,a=!1,l=["",""];for(const t in i){let s=!1;const c=i[t];e.includes(c)||n.includes(c)?s=!0:"-"===c?(a=!1,""!==l[0]?(o+=1,o<2&&(l[o]=l[o]+c)):l[o]=c):"."===c?a?(o+=1,l[o]=l[o]+c):(a=!0,l[o]=l[o]+c):" "!==c?l[o]=l[o]+c:(a=!1,o+=1),(o===r||s)&&(a=!1,2===r&&""!==l[0]?h=h+l[0]+","+l[1]+" ":1===r&&""!==l[0]&&(h=h+l[0]+" "),s&&(e.includes(c)?r=1:n.includes(c)&&(r=2),h+=c,"z"!==c&&(h+=" ")),l=["",""],"-"===c&&(l[0]="-"),o=0)}let c=new N(0,0),u=null;const w=h.split(" "),d=[];for(const t of w)switch(t){case"m":case"M":case"v":case"V":case"h":case"H":case"l":case"L":case"z":case"Z":u=t;break;default:const s=t.split(",").map(t=>Number.parseFloat(t));let i=c;switch(u){case"m":i=c.add(new N(s[0],s[1]));break;case"M":i=new N(s[0],s[1]);break;case"v":i=c.add(new N(0,s[0]));break;case"V":i=new N(c.x,s[0]);break;case"h":i=c.add(new N(s[0],0));break;case"H":i=new N(s[0],c.y);break;case"l":i=c.add(new N(s[0],s[1]));break;case"L":i=new N(s[0],s[1])}c=i}for(const t of d)t.x-=s.x,t.y-=s.y;return new U(d)}}class Y{constructor(t){this.position=N.Mt(),this.speed=N.Mt(),this.Ct=t,this.shape=null,this.St=N.Mt(),this.Dt=N.Mt(),this.H=1,this.j=!0,this.W=!1,this.T=!0}gt(t){this.shape=this.shape.gt(t)}A(t){this.St=this.St.add(t)}_t(t){this.Dt=this.Dt.add(t)}rotate(t,s){this.shape.rotate(t,s)}translate(t){this.position=this.position.add(t)}V(){return new U(this.shape.v.map(t=>t.add(this.position)))}update(t){this.speed=this.speed.add(this.St.add(this.Dt).multiply(1/this.Ct*t)),this.translate(this.speed.multiply(t)),this.St=N.Mt()}}const Z=new class{constructor(){this.kt={},this.$t={},this.Ht={},this.jt=null,this.kt={},this.$t={},this.Ht={}}At(t,s){const i="data:image/svg+xml;base64,"+btoa(t.outerHTML),h=new Image;h.onload=()=>{this.jt=h,s()},h.src=i}load(t,s){const i=t.getElementById("$layer2");for(const s of i.querySelectorAll("*")){const i=s,h=i.getAttribute("d"),e=t.getElementById(i.id.replace(/(.[0-9])?.collider/g,"")),n=null!=e?e.getBBox():i.getBBox();this.$t[i.id.substring(1)]=U.xt(h,n)}for(const s of t.getElementById("$layer1").querySelectorAll("*")){const t=s;t.getBBox&&(this.kt[t.id.substring(1)]=t.getBBox()),t.id.endsWith(".fx")&&(this.Ht[t.id.substring(1)]=new Path2D(t.getAttribute("d")))}i.style.display="none",this.At(t,()=>{s(),t.style.display="none"})}};class G{constructor(t,s,i=a,h=null){let e=new Y(h);e.position=s,e.shape=Z.$t[t+".collider"],e.H=i,this.body=e,this.Lt=Z.kt[t],this.scale=new N(1,1),this.angle=0,this.Pt=N.Mt(),this.offset=new N(0,0)}gt(){null!=this.Lt&&(this.scale=new N(-1,1),this.body.gt(this.Lt.width/2),this.offset.x-=this.Lt.width)}update(t){}Ft(t){h&&this.body.shape?U.vt(this.body,t):this.Lt&&(t.save(),t.scale(this.scale.x,this.scale.y),t.translate(this.scale.x*this.Pt.x,this.scale.y*this.Pt.y),t.rotate(Math.sign(this.scale.x)*this.angle),t.drawImage(Z.jt,this.Lt.x,this.Lt.y,this.Lt.width,this.Lt.height,(this.body.position.x-this.Pt.x)/this.scale.x+this.offset.x,(this.body.position.y-this.Pt.y)/this.scale.y+this.offset.y,this.Lt.width,this.Lt.height),t.restore())}}class J extends G{constructor(t,s){super(t,s),this.body.q=t=>this.q(t)}q(t){t>C&&I.ct(t)}}const K=new class{constructor(){this.value=0,this.zt(0)}zt(t){this.value+=t,this.get("s").innerText=this.value.toString()}Bt(t){this.get("o").innerText=t}Ot(t){this.get("d").innerText=t}Wt(){const t=this.get("d");t.style.display="none"==t.style.display?"block":"none"}get(t){return document.getElementById(t)}};class Q extends G{constructor(t,s,i,h=a,e=null){super(t,s,h,e),this.Vt=1,this.Rt=1,this.body.R=t=>this.R(),this.zt=i}R(){this.Vt-=this.Rt,this.Vt<=0&&(this.body.W=!0,K.zt(this.zt))}Ft(t){this.Vt<=0||super.Ft(t)}}class X extends Q{constructor(t){super("tree",t,25)}R(){super.R(),mt.Tt++,mt.qt(),I.ut(),this.Vt=2}update(t){2==this.Vt&&this.scale.x>0&&(this.scale=this.scale.C(new N(5*t,5*t)))}}class tt extends Q{constructor(t){super("iron",t,50)}update(t){2==this.Vt&&this.scale.x>0&&(this.scale=this.scale.C(new N(5*t,5*t)))}R(){super.R(),mt.Et++,mt.qt(),I.ft(),this.Vt=2}}class st extends G{constructor(t){super("gold",t),this.body.T=!1,this.body.I=()=>this.I(),this.It=!1}I(){mt.Nt++,mt.qt(),this.It=!this.It,K.zt(5),I.lt()}Ft(t){super.Ft(t),h||this.It||(t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(this.body.position.x,this.body.position.y,this.Lt.width,this.Lt.height))}}const it=new class{constructor(){this.Ut=[]}update(t){for(const s of this.Ut)s.update(t);this.Ut=this.Ut.filter(t=>t.Vt>0)}Ft(t){for(const s of this.Ut)s.Ft(t)}};class ht{constructor(t,s){this.position=s,this.Yt=t,this.scale=1,this.Zt=0,this.Vt=500,this.color="white",this.alpha=1,this.Gt=0,this.lineWidth=1,this.fill=!1,this.gt=1}update(t){this.scale+=this.Zt*t,this.alpha+=this.Gt*t,this.alpha<0&&(this.alpha=0),this.alpha>1&&(this.alpha=1),this.Vt-=t}Ft(t){t.save(),t.globalAlpha=this.alpha,t.strokeStyle=this.color,t.fillStyle=this.color,t.lineWidth=this.lineWidth,this.gt&&t.scale(this.gt,1),t.translate(this.gt*this.position.x,this.position.y),this.fill?t.fill(this.Yt):t.stroke(this.Yt),t.restore()}}class et extends G{constructor(t,s=null){super("bumper",t,x),this.Jt=new G(s,t.add(new N(18*this.scale.x,10*this.scale.y))),this.body.R=()=>this.Kt(),this.Qt=null,this.R=null}Kt(){const t=this.body.position.C(new N(this.Lt.x,this.Lt.y));let s=new Path2D;s.arc(this.body.position.x+this.Lt.width/2,this.body.position.y+this.Lt.height/2,25,0,2*Math.PI),this.Qt=new ht(s,t),this.Qt.Gt=-5,this.Qt.Zt=.1,this.Qt.Vt=1.5,this.Qt.lineWidth=2,this.Qt.fill=!0,this.Qt.alpha=.6,it.Ut.push(this.Qt),I.pt(),null!=this.R&&this.R()}update(t){null!=this.Qt&&(this.Qt.Vt>1.45&&(this.scale.x+=1*t,this.scale.y+=1*t),this.Qt.Vt<1.4&&(this.scale.x-=1*t,this.scale.y-=1*t),this.Qt.Vt<1.35&&(this.scale=new N(1,1),this.Qt=null))}Ft(t){super.Ft(t),null!=this.Jt&&this.Jt.Ft(t)}}class nt extends Q{constructor(t){super("enemy",t,50,a,1),this.Xt=Z.Ht["armor.fx"],this.body.speed=new N(0,60),this.body.R=()=>this.R(),this.body.T=!1,this.zt=50}R(){super.R(),I.wt()}update(t){this.body.update(t)}Ft(t){super.Ft(t),null==this.Xt||h||0==this.Vt||(t.save(),t.globalAlpha=.7,t.fillStyle="gray",t.translate(this.body.position.x-657,this.body.position.y-612),t.fill(this.Xt),t.restore())}}class rt extends nt{constructor(t){super(t),this.body.shape=new U(this.body.shape.v.map(t=>t.multiply(2))),this.body.T=!0,this.body.R=()=>this.R(),this.zt=500,this.Vt=3,this.scale=new N(2,2),this.Xt=null}R(){super.R(),I.dt()}update(t){this.body.position.y>n&&(this.body.position.y=-this.Lt.height),super.update(t)}}const ot=new class{constructor(){document.addEventListener("keydown",t=>this.ts(t),!1),document.addEventListener("keyup",t=>this.ss(t),!1),this.right=!1,this.left=!1,this.hs=!1}ts(t){"ArrowRight"==t.key&&(this.right=!0),"ArrowLeft"==t.key&&(this.left=!0)," "==t.key&&(this.hs=!0)}ss(t){"ArrowRight"==t.key&&(this.right=!1),"ArrowLeft"==t.key&&(this.left=!1)," "==t.key&&(this.hs=!1)}};class at extends G{constructor(t,s){let i,h;1==t&&(i=new N(178.11,653),h=new N(188.2,664.3)),-1==t&&(i=new N(290.61,652.71),h=new N(344,664.3)),super("flipper",i,u),this.es=t,this.ns=s,this.body.j=!1,-1==t&&this.gt(),this.Pt=h,this.rs=-this.es*l,this.os=c,this.as=!1}ls(){this.as=!0}update(t){if(this.as)if(0==this.angle&&I.bt(),Math.abs(this.angle)<Math.abs(this.rs)){const s=Math.sign(this.rs)*this.os*t,i=this.Pt.C(this.ns.body.position).length()+20;this.angle+=s,this.body.rotate(this.Pt.C(this.body.position),s),this.body.speed=new N(Math.sign(this.rs)*Math.cos(this.angle),-Math.sign(this.rs)*Math.sin(this.angle)).multiply(1e4*this.os/i)}else this.as=!1,this.body.speed=N.Mt();else if(Math.abs(this.angle)>Math.PI/360){const s=-Math.sign(this.rs)*this.os*t,i=this.Pt.C(this.ns.body.position).length()+20;this.angle+=s,this.body.rotate(this.Pt.C(this.body.position),s),this.body.speed=new N(Math.sign(this.rs)*Math.cos(this.angle),-Math.sign(this.rs)*Math.sin(this.angle)).multiply(-1e4*this.os/i)}else this.as=!1,this.body.speed=N.Mt(),this.angle=0;(ot.left&&1==this.es||ot.right&&-1==this.es)&&this.ls()}}class lt extends G{constructor(){super("ball",new N(560,600),d,w),this.cs=this.body.position,this.body.j=!1,this.body._t(new N(0,this.body.Ct*o))}reset(){this.body.position=this.cs}update(t){this.body.update(t)}}class ct extends G{constructor(){super("plunger",new N(546.8,663.3),y,w),this.body.j=!1,this.us=0}update(t){const s=this.body.position.y;ot.hs?(0==this.us&&I.yt(),this.us<=p?this.body.speed=new N(0,f):this.body.speed=N.Mt()):this.us>0?this.body.speed=new N(0,-m):(this.body.speed=N.Mt(),this.us=s-this.body.position.y),this.body.update(t),this.us+=this.body.position.y-s}}class ut{constructor(t){this.es=t,this.B=new Y(null),this.B.position=new N(100.5,454.7),this.B.shape=Z.$t["kicker.collider.1"],this.B.H=a,this.B.j=!1,this.O=new Y(null),this.O.position=new N(100.4,530.2),this.O.shape=Z.$t["kicker.collider.2"],this.O.H=a,this.O.j=!1,this.Lt=Z.kt.kicker,this.body=new Y(null),this.body.shape=Z.$t["kicker.collider.3"],-1==t&&(this.body.position=new N(344.4,454.69),this.B.position=new N(417.1,454),this.O.position=new N(347.9,530),this.O.gt(this.Lt.width/2),this.body.gt(this.Lt.width/2)),1==t&&(this.body.position=new N(105.18,454.69));const s=-1==this.es?.9:1.05;this.body.H=a*s,this.body.speed=new N(0,-v),this.body.j=!1,this.body.R=()=>this.R()}R(){const t=-1==this.es?new N(16.5,-16.5):N.Mt(),s=this.B.position.C(new N(this.es*this.Lt.x,this.es*this.Lt.y)).add(t),i=new ht(Z.Ht["kicker.fx"],s);i.Gt=-.7,i.Zt=.1,i.Vt=1.5,i.gt=this.es,i.lineWidth=2,it.Ut.push(i);const h=new ht(Z.Ht["helmet.fx"],s);h.Gt=-.7,h.Zt=.1,h.Vt=1.5,h.gt=this.es,it.Ut.push(h),I.pt()}update(t){}Ft(t){if(h)U.vt(this.body,t),U.vt(this.B,t),U.vt(this.O,t);else{t.save(),t.scale(this.es,1);const s=-1==this.es?-this.Lt.width-5:-5;t.drawImage(Z.jt,this.Lt.x,this.Lt.y,this.Lt.width,this.Lt.height,this.es*this.body.position.x+s,this.body.position.y,this.Lt.width,this.Lt.height),t.restore()}}}const wt=new class{load(t){this.ws=t,this.ns=new lt,this.ds=new at(1,this.ns),this.ps=new ut(1),this.fs=new at(-1,this.ns),this.ms=new ut(-1),this.ys=new ct,this.bs=new J("bend.1",new N(44.68,415.1)),this.bs.Lt=Z.kt.bend,this.Ms=new J("bend.2",new N(44.68,415.1)),this.gs=new J("bend.1",new N(334.3,414.4)),this.gs.Lt=Z.kt.bend,this.gs.gt(),this.vs=new J("bend.2",new N(474.9,415.5)),this.xs=new J("gutter",new N(0,653)),this.Cs=new J("gutter",new N(319.5,653)),this.Cs.gt(),this.Ss=new J("fence",new N(530.8,107.1)),this.Ds=new J("deflector",new N(539,0)),this._s=new J("left-wall",new N(-100,0)),this.ks=new J("top-wall",new N(-100,-100)),this.$s=new J("right-wall",new N(600,0)),this.sign=new J("sign",new N(220,300)),this.Hs=new Y(1),this.Hs.position=new N(540,120),this.Hs.shape=new U([new N(0,0),new N(0,100),new N(60,100),new N(60,-50)]),this.Hs.T=!1,this.Hs.N=()=>{this.ns.body.position.y<200&&(this.Hs.T=!0)},this.Hs.H=a,this.js="0"}update(t){this.ds.update(t),this.fs.update(t),this.ns.update(t),this.ys.update(t),this.ws.update(this.ns.body,this.ds.body),this.ws.update(this.ns.body,this.ps.body),this.ws.update(this.ns.body,this.ps.B),this.ws.update(this.ns.body,this.ps.O),this.ws.update(this.ns.body,this.fs.body),this.ws.update(this.ns.body,this.ms.body),this.ws.update(this.ns.body,this.ms.B),this.ws.update(this.ns.body,this.ms.O),this.ws.update(this.ns.body,this.ys.body),this.ws.update(this.ns.body,this.bs.body),this.ws.update(this.ns.body,this.Ms.body),this.ws.update(this.ns.body,this.gs.body),this.ws.update(this.ns.body,this.vs.body),this.ws.update(this.ns.body,this.xs.body),this.ws.update(this.ns.body,this.Cs.body),this.ws.update(this.ns.body,this.Ss.body),this.ws.update(this.ns.body,this.Ds.body),this.ws.update(this.ns.body,this._s.body),this.ws.update(this.ns.body,this.ks.body),this.ws.update(this.ns.body,this.$s.body),this.ws.update(this.ns.body,this.Hs),this.ns.body.position.y>n&&(this.ns.body.translate(this.ns.cs.C(this.ns.body.position)),this.Hs.T=!1)}As(t){const s=t.createLinearGradient(300,0,300,800);s.addColorStop(0,"#9BD077"),s.addColorStop(1,"#71c837"),t.fillStyle=s,t.fillRect(0,0,e,n),t.fillStyle="white",this.sign.Ft(t),t.font="48px serif",t.fillText(this.js,235,355),this.bs.Ft(t),this.Ms.Ft(t),this.gs.Ft(t),this.vs.Ft(t),this.ps.Ft(t),this.ms.Ft(t),this.xs.Ft(t),this.Cs.Ft(t),this.Ds.Ft(t),this._s.Ft(t),this.ks.Ft(t),this.$s.Ft(t)}Ls(t){this.ds.Ft(t),this.fs.Ft(t),this.ys.Ft(t)}Ps(t){this.ns.Ft(t),this.Ss.Ft(t)}};const dt=new class{constructor(){this.entities=[],this.js="-404",this.text="(404 BC) Victory is ours! The Delian League and Athens surrendered. The Peloponnesian War will be remembered as a great victory of Sparta.\n\nCredits:\n\nBarthélémy Renucci\nAdrian Lissot\nDavid Sebaoun\nFlorent Perez"}load(t){}update(t){}As(t){wt.As(t)}Ls(t){}Ps(t){}Fs(){setTimeout(()=>E.tt(),2500)}zs(){return!1}Bs(){return null}};const pt=new class{constructor(){this.entities=[],this.js="-413",this.text="(413 BC) Victory is near, commander. Now is time for war ⚔️. Defeat all incoming Delian soldiers!\n\nHit as many Delian soldiers as possible, and defeat their commander: if he dies, they will most likely surrender to our superiority.\n\nCharge!"}load(t){K.Bt(""),this.ws=t,this.ns=wt.ns,this.ns.reset(),this.Os=[];for(let t=0;t<25;t++){const s=Math.floor(t/5),i=t%5;this.Os.push(new nt(new N(50+100*i,-100-300*s)))}this.Ws=new rt(new N(225,-2e3))}update(t){wt.update(t),it.update(t);for(const s of this.Os)s.update(t),s.body.position.y>-s.Lt.height&&this.ws.update(this.ns.body,s.body);this.Ws.update(t),this.ws.update(this.ns.body,this.Ws.body)}As(t){wt.As(t)}Ls(t){wt.Ls(t)}Ps(t){wt.Ps(t);for(const s of this.Os)s.body.position.y>-s.Lt.height&&s.Ft(t);this.Ws.Ft(t),it.Ft(t)}Fs(){E.et()}zs(){return 0==this.Ws.Vt}Bs(){return E.ot(),E.rt(),dt}};const ft=new class{constructor(){this.Vs=["sword","axe","lance"],this.Rs(),this.Ts=null,this.qs=[null,null,null],this.Es=0,this.js="-421",this.text="(421 BC) Excellent job, commander. We have all the resources we need to build and equip an army!\n\nLet's show soldiers some strategy. Your enemy's weapon is shown in blue, and you have to hit the right bumper to win the round. Choose your weapon bumper with care:\n\n🗡️ > 🪓\n🪓 > 🔱\n🔱 > 🗡️\n"}load(t){this.qt(),this.ws=t,this.ns=wt.ns,this.ns.reset(),this.Is=new et(new N(19.64,163),"lance"),this.Is.R=()=>{this.Ts="lance",this.Ns()},this.Us=new et(new N(222,11.03),"axe"),this.Us.R=()=>{this.Ts="axe",this.Ns()},this.Ys=new et(new N(413.4,163),"sword"),this.Ys.R=()=>{this.Ts="sword",this.Ns()},this.Zs=Z.kt.cross,this.Gs=Z.kt.check}Rs(){const t=Math.floor(3*Math.random());this.Js=this.Vs[t]}Ns(){3!=this.Es&&("sword"==this.Js&&"lance"==this.Ts||"axe"==this.Js&&"sword"==this.Ts||"lance"==this.Js&&"axe"==this.Ts?(this.qs[this.Es]=!0,this.Es++,this.qt(),K.zt(100),this.Rs()):(this.qs[this.Es]=!1,K.zt(-10)))}update(t){wt.update(t),this.Us.update(t),this.Ys.update(t),this.Is.update(t),this.ws.update(this.ns.body,this.Us.body),this.ws.update(this.ns.body,this.Ys.body),this.ws.update(this.ns.body,this.Is.body),it.update(t)}As(t){wt.As(t),t.fillStyle="#0d5eaf",t.strokeStyle="white",t.rect(365,300,60,77),t.fill(),t.stroke()}Ls(t){wt.Ls(t);const s=Z.kt[this.Js];t.drawImage(Z.jt,s.x,s.y,s.width,s.height,375,321,2.5*s.width,2.5*s.height);let i=this.qs[this.Es];null==i&&0!=this.Es&&this.qs[this.Es-1]&&(i=this.qs[this.Es-1]);let h=null==i?null:i?this.Gs:this.Zs;null!=h&&t.drawImage(Z.jt,h.x,h.y,h.width,h.height,150,310,h.width,h.height),this.Us.Ft(t),this.Ys.Ft(t),this.Is.Ft(t)}Ps(t){wt.Ps(t),it.Ft(t)}zs(){return 3==this.qs.filter(t=>1==t).length}qt(){K.Bt(`Win: ${this.Es} / 3`)}Fs(){E.ht()}Bs(){return E.ot(),E.nt(),this.js="-404",pt}};const mt=new class{constructor(){this.Tt=0,this.Nt=0,this.Et=0,this.js="-431",this.text=`(431 BC) Welcome, commander. The Spartan assembly voted war ⚔️ against our forever enemy, Athens and its Delian League. Commander, you must to lead Sparta and the Peloponnesian League to victory!\nWe need to be ready as soon as possible, but we're missing resources, strategy and soldiers.\n\nWe first need to collect some resources for our army:\n\n🌲 ${g} units of wood\n⛏️ ${b} units of iron\n📀 ${M} gold\n`,this.entities=[]}load(t){this.qt(),this.ws=t,this.ns=wt.ns,this.entities=[new J("small-mine-wall",new N(0,220)),new X(new N(175,0)),new X(new N(150,150)),new X(new N(373.4,266)),new tt(new N(10.91,8.75)),new tt(new N(114.4,7.95)),new tt(new N(115.6,90.85)),new tt(new N(75.95,177.4)),new tt(new N(11.4,167)),new st(new N(77.51,318)),new st(new N(281.9,401.9)),new st(new N(310.1,91.76)),new et(new N(14.76,83.63))]}update(t){wt.update(t);for(let s of this.entities)s.update(t),this.ws.update(this.ns.body,s.body);this.entities[9].It&&this.entities[10].It&&this.entities[11].It&&(this.entities[9].It=!1,this.entities[10].It=!1,this.entities[11].It=!1,this.Nt+=5,K.zt(100),this.qt()),it.update(t)}As(t){wt.As(t)}Ls(t){wt.Ls(t);for(let s=2;s<this.entities.length;s++)this.entities[s].Ft(t)}Ps(t){wt.Ps(t),this.entities[0].Ft(t),this.entities[1].Ft(t),it.Ft(t)}zs(){return this.Tt>=g&&this.Nt>=M&&this.Et>=b}Fs(){E.it()}qt(){K.Bt(`🌲: ${this.Tt} / ${g} | ⛏️: ${this.Et} / ${b} | 📀: ${this.Nt} / ${M}`)}Bs(){return E.ot(),E.nt(),ft}};class yt{constructor(){this.ws=new H,this.Ks=mt,this.Ks==mt?E.tt():this.Ks.Fs(),wt.load(this.ws),this.Ks.load(this.ws),this.Qs=!1,wt.js=this.Ks.js,this.Xs=!1,K.Ot(this.Ks.text)}update(t){this.Xs?(this.Ks.update(t),this.Ks.zs()&&(this.Ks=this.Ks.Bs(),wt.Hs.T=!1,this.Ks.load(this.ws),this.Ks.Fs(),this.Qs=!1,wt.js=this.Ks.js,this.Xs=!1,K.Wt(),K.Ot(this.Ks.text))):ot.hs&&this.Ks!=dt&&(this.Ks==mt&&(E.ot(),E.it()),this.Xs=!0,K.Wt())}Ft(t){this.Qs||(t.ti.clearRect(0,0,e,n),this.Ks.As(t.ti),this.Qs=!0),t.si.clearRect(0,0,e,n),this.Ks.Ls(t.si),t.ii.clearRect(0,0,e,n),this.Ks.Ps(t.ii)}}class bt{constructor(t,s,i){this.ti=t,this.si=s,this.ii=i}}class Mt{constructor(){this.hi=r,this.ei=performance.now(),this.ni=this.ei,this.ri=document.getElementById("dynamic-canvas"),this.oi=document.getElementById("hybrid-canvas"),this.ai=document.getElementById("static-canvas"),this.context=new bt(this.ai.getContext("2d"),this.oi.getContext("2d"),this.ri.getContext("2d")),this.li=new yt}loop(t){window.requestAnimationFrame(t=>this.loop(t));var s=0;if(t>this.ei+this.hi){var i=t-this.ei;s=Math.floor(i/this.hi)}this.ci(s),this.Ft(),this.ni=t}ci(t){for(var s=0;s<t;s++)this.ei+=this.hi,this.update(this.hi/1e3)}update(t){this.li.update(t)}Ft(){this.li.Ft(this.context)}}Z.load(document.getElementById("svg"),()=>{(new Mt).loop(performance.now())})}]);</script></body></html>